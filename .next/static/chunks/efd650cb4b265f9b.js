(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3987,e=>{"use strict";var s=e.i(29511),t=e.i(58138),a=e.i(16755),r=e.i(74117);function l(){let e=(0,a.useRouter)(),[l,i]=(0,t.useState)([]),[d,n]=(0,t.useState)([]),[o,c]=(0,t.useState)(null),[m,u]=(0,t.useState)("all"),[h,x]=(0,t.useState)({entity_reference:"",transaction_type:"",comments:"",item_type:"",item_make:"",description:"",disposed_value:"",status_comments:"",estimated_value:"",currency_code:""}),{toast:p}=(0,r.useToast)();(0,t.useEffect)(()=>{!async function(){try{let e=await fetch("/api/goaml/meta",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),s=await e.json();s?.status&&n(s.data?.countries?.countries||[])}catch(e){console.error("Failed to fetch metadata",e)}}()},[]),(0,t.useEffect)(()=>{!async function(){try{let e=await fetch(`/api/onboarding/short-data-customers?customer_type=${m}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),s=await e.json();s?.status&&i(s.data||[])}catch(e){console.error("Failed to fetch customers",e)}}()},[m]);let b=async()=>{if(!o)return void p({title:"Required fields missing",description:"Please select a customer"});if(!o.id)return void p({title:"Error",description:"Customer ID is missing. Please re-select the customer."});try{let s={customer_id:Number(o.id),...h};console.log("Submitting payload:",s);let t=await fetch("/api/goaml/reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),a=await t.json();if(a?.status)e.refresh(),e.push("/dashboard/goaml-reporting");else{let e=JSON.parse(a.error);console.log("GOAML Report Creation Response:",e.message),p({title:e.message,description:e.error||"Failed to create report"})}}catch(e){console.error("Failed to submit report",e),p({title:"Error",description:"An error occurred while submitting the report"})}};return(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Create GOAML Report"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-1",children:"Customer Type"}),(0,s.jsxs)("select",{className:"border p-2 rounded w-full",value:m,onChange:e=>u(e.target.value),children:[(0,s.jsx)("option",{value:"all",children:"All Customers"}),(0,s.jsx)("option",{value:"individual",children:"Individual"}),(0,s.jsx)("option",{value:"corporate",children:"Corporate"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-1",children:"Pick Customer"}),(0,s.jsxs)("select",{className:"border p-2 rounded w-full",onChange:async e=>{let s=e.target.value;if(!s)return void c(null);try{let e=await fetch(`/api/onboarding/customers/${s}`),t=await e.json();if(t?.status){let e=t.data;e.id||(e.id=parseInt(s)),c(e)}}catch(e){console.error("Failed to fetch customer details",e)}},children:[(0,s.jsx)("option",{value:"",children:"Select Customer"}),l.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),o&&(0,s.jsxs)("div",{className:"mb-4 border p-3 rounded",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Company Name"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:o.corporate_detail?.company_name||o.name||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Trade License Number"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:o.corporate_detail?.trade_license_number||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Office Number"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:o.contact_office_number||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Company Address"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:o.corporate_detail?.company_address||o.company_address||"-"})]})]}),o.individual_detail&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Personal Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:o.individual_detail.first_name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:o.individual_detail.last_name})]})]})]})]}),(0,s.jsxs)("div",{className:"mb-4 border p-3 rounded",children:[(0,s.jsx)("h3",{className:"font-semibold mb-4",children:"GOAML Report Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entity Reference"}),(0,s.jsx)("input",{className:"border p-2 rounded w-full",value:h.entity_reference,onChange:e=>x({...h,entity_reference:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transaction Type"}),(0,s.jsxs)("select",{className:"border p-2 rounded w-full",value:h.transaction_type,onChange:e=>x({...h,transaction_type:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"Select a transaction type"}),(0,s.jsx)("option",{value:"sale",children:"Sale"}),(0,s.jsx)("option",{value:"purchase",children:"Purchase"})]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comments"}),(0,s.jsx)("input",{className:"border p-2 rounded w-full",value:h.comments,onChange:e=>x({...h,comments:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Make"}),(0,s.jsx)("input",{className:"border p-2 rounded w-full",value:h.item_make,onChange:e=>x({...h,item_make:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Type"}),(0,s.jsxs)("select",{className:"border p-2 rounded w-full",value:h.item_type,onChange:e=>x({...h,item_type:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"Select an item type"}),(0,s.jsx)("option",{value:"new",children:"New"}),(0,s.jsx)("option",{value:"old",children:"Old"})]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,s.jsx)("textarea",{className:"border p-2 rounded w-full",rows:3,value:h.description,onChange:e=>x({...h,description:e.target.value})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disposed Value"}),(0,s.jsx)("input",{type:"number",className:"border p-2 rounded w-full",value:h.disposed_value,onChange:e=>x({...h,disposed_value:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status Comments"}),(0,s.jsx)("input",{className:"border p-2 rounded w-full",value:h.status_comments,onChange:e=>x({...h,status_comments:e.target.value})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Value"}),(0,s.jsx)("input",{type:"number",className:"border p-2 rounded w-full",value:h.estimated_value,onChange:e=>x({...h,estimated_value:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency Code"}),(0,s.jsxs)("select",{className:"border p-2 rounded w-full",value:h.currency_code,onChange:e=>x({...h,currency_code:e.target.value}),children:[(0,s.jsx)("option",{value:"",children:"Select currency code..."}),d.map(e=>(0,s.jsx)("option",{value:e.currency,children:e.currency},e.id))]})]})]})]}),(0,s.jsx)("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm",onClick:b,children:"Submit"})]})}e.s(["default",()=>l])}]);
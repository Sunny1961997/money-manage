(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,62969,e=>{"use strict";var s=e.i(29511),r=e.i(58138),t=e.i(10641),d=e.i(16755);function a(e,s,r="  "){return`${r}<${e}>${(null==s?"":String(s)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}</${e}>`}var i=e.i(4421);function c(){let e=(0,d.useParams)(),c=e?.id,[n,l]=(0,r.useState)(null),[o,m]=(0,r.useState)(!0),[u,x]=(0,r.useState)(null),[p,h]=(0,r.useState)(!1),{user:g}=(0,i.useAuthStore)();(0,r.useEffect)(()=>{if(!c){x("Missing report id"),m(!1);return}!async function(){try{m(!0);let e=await fetch(`/api/goaml/reports/${c}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),s=await e.json();console.log("Fetched GOAML Report:",s),s?.status?l(s.data.report):x(s?.message||"Failed to load report")}catch(e){x(e.message||"Failed to load report")}finally{m(!1)}}()},[c]);let v=(0,r.useMemo)(()=>{let e=n?.id??c??"report";return`goaml-report-${e}.xml`},[n?.id,c]);return o?(0,s.jsx)("div",{className:"p-6",children:"Loading..."}):u?(0,s.jsx)("div",{className:"p-6 text-red-600",children:u}):n?(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold",children:"View GOAML Report"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{className:"px-3 py-2 rounded border text-sm disabled:opacity-60",onClick:()=>{if(n){h(!0);try{let e,s,r,t,d,i,c,l,o=(e=n?.customer||{},s=e?.individual_detail||{},r=e?.corporate_detail||{},t=n?.created_at?new Date(n.created_at).toISOString():"",(d=[]).push('<?xml version="1.0" encoding="UTF-8"?>'),d.push("<goaml_report>"),d.push(a("report_id",n?.id??"","  ")),d.push(a("created_at",t,"  ")),d.push("  <customer>"),d.push(a("customer_type",e?.customer_type??"","    ")),d.push(a("customer_name",n?.customer_name??e?.name??"","    ")),d.push(a("customer_id",n?.customer_id??e?.id??"","    ")),d.push(a("contact_office_number",e?.contact_office_number??"","    ")),d.push(a("company_address",r?.company_address??e?.company_address??"","    ")),d.push("    <individual_detail>"),d.push(a("first_name",s?.first_name??"","      ")),d.push(a("last_name",s?.last_name??"","      ")),d.push(a("passport_country",s?.passport_country??"","      ")),d.push(a("nationality",s?.nationality??"","      ")),d.push(a("phone_number",s?.phone_number??"","      ")),d.push(a("address",s?.address??"","      ")),d.push(a("country_code",s?.country_code??"","      ")),d.push("    </individual_detail>"),d.push("  </customer>"),d.push("  <report_details>"),d.push(a("entity_reference",n?.entity_reference??"","    ")),d.push(a("transaction_type",n?.transaction_type??"","    ")),d.push(a("comments",n?.comments??"","    ")),d.push(a("item_type",n?.item_type??"","    ")),d.push(a("item_make",n?.item_make??"","    ")),d.push(a("description",n?.description??"","    ")),d.push(a("disposed_value",n?.disposed_value??"","    ")),d.push(a("status_comments",n?.status_comments??"","    ")),d.push(a("estimated_value",n?.estimated_value??"","    ")),d.push(a("currency_code",n?.currency_code??"","    ")),d.push("  </report_details>"),d.push("</goaml_report>"),d.join("\n"));i=new Blob([o],{type:"application/xml"}),c=URL.createObjectURL(i),(l=document.createElement("a")).href=c,l.download=v,document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(c)}finally{h(!1)}}},disabled:p,children:p?"Generating...":"Generate XML"}),g?.role!=="Analyst"&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.default,{href:`/dashboard/goaml-reporting/edit/${c}`,children:(0,s.jsx)("button",{className:"px-3 py-2 rounded border text-sm",children:"Edit"})}),(0,s.jsx)("button",{className:"px-3 py-2 rounded border text-sm text-red-600",children:"Delete"})]})]})]}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Report ID: ",n.id]}),(0,s.jsxs)("div",{className:"text-sm text-gray-600",children:["Created: ",n.created_at?new Date(n.created_at).toLocaleDateString():"-"]})]}),(0,s.jsxs)("div",{className:"mb-4 border p-3 rounded",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Customer Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Customer Type"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.customer?.customer_type||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Customer Name"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.customer_name||n.customer?.name||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Customer ID"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.customer_id||n.customer?.id||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Contact Office Number"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.customer?.contact_office_number||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Company Address"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.customer?.corporate_detail?.company_address||n.customer?.company_address||"-"})]})]})]}),(0,s.jsxs)("div",{className:"mb-4 border p-3 rounded",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Personal Information (Tenant Details)"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"First Name"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.customer?.individual_detail?.first_name||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Last Name"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.customer?.individual_detail?.last_name||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Passport Country"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.customer?.individual_detail?.passport_country||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Nationality"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.customer?.individual_detail?.nationality||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Phone Number"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.customer?.individual_detail?.phone_number||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Address"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.customer?.individual_detail?.address||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Country Code"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.customer?.individual_detail?.country_code||"-"})]})]})]}),(0,s.jsxs)("div",{className:"mb-4 border p-3 rounded",children:[(0,s.jsx)("h3",{className:"font-semibold mb-2",children:"Report Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Entity Reference"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.entity_reference||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Transaction Type"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.transaction_type||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Comments"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.comments||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Item Type"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.item_type||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Item Make"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.item_make||"-"})]}),(0,s.jsxs)("div",{className:"col-span-2",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Description"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.description||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Disposed Value"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.disposed_value||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Status Comments"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.status_comments||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Estimated Value"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.estimated_value||"-"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Currency Code"}),(0,s.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:n.currency_code||"-"})]})]})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(t.default,{href:"/dashboard/goaml-reporting",className:"px-3 py-2 rounded border text-sm",children:"Back to list"})})]}):(0,s.jsx)("div",{className:"p-6",children:"No report found."})}e.s(["default",()=>c],62969)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16348,e=>{"use strict";e.i(68519);var t,n=e.i(29511),i=e.i(70065),o=e.i(67881),r=e.i(23750),l=e.i(2870),s=e.i(13637),a=e.i(5576),d=e.i(68793),c=e.i(10552),u=e.i(62870),h=e.i(58138),m=e.i(10641),f=e.i(27341),g=e.i(4421),p=e.i(57924);function y(e,t,n,i,o){i=i||{};var r=o.internal.scaleFactor,l=o.internal.getFontSize()/r,s=l*(o.getLineHeightFactor?o.getLineHeightFactor():1.15),a="",d=1;if(("middle"===i.valign||"bottom"===i.valign||"center"===i.halign||"right"===i.halign)&&(d=(a="string"==typeof e?e.split(/\r\n|\r|\n/g):e).length||1),n+=.8500000000000001*l,"middle"===i.valign?n-=d/2*s:"bottom"===i.valign&&(n-=d*s),"center"===i.halign||"right"===i.halign){var c=l;if("center"===i.halign&&(c*=.5),a&&d>=1){for(var u=0;u<a.length;u++)o.text(a[u],t-o.getStringUnitWidth(a[u])*c,n),n+=s;return o}t-=o.getStringUnitWidth(e)*c}return"justify"===i.halign?o.text(e,t,n,{maxWidth:i.maxWidth||100,align:"justify"}):o.text(e,t,n),o}var x={},v=function(){function e(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return e.setDefaults=function(e,t){void 0===t&&(t=null),t?t.__autoTableDocumentDefaults=e:x=e},e.unifyColor=function(e){return Array.isArray(e)?e:"number"==typeof e?[e,e,e]:"string"==typeof e?[e]:null},e.prototype.applyStyles=function(t,n){void 0===n&&(n=!1),t.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(t.fontStyle);var i,o,r,l=this.jsPDFDocument.internal.getFont(),s=l.fontStyle,a=l.fontName;if(t.font&&(a=t.font),t.fontStyle){s=t.fontStyle;var d=this.getFontList()[a];d&&-1===d.indexOf(s)&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(d[0]),s=d[0])}if(this.jsPDFDocument.setFont(a,s),t.fontSize&&this.jsPDFDocument.setFontSize(t.fontSize),!n){var c=e.unifyColor(t.fillColor);c&&(i=this.jsPDFDocument).setFillColor.apply(i,c),(c=e.unifyColor(t.textColor))&&(o=this.jsPDFDocument).setTextColor.apply(o,c),(c=e.unifyColor(t.lineColor))&&(r=this.jsPDFDocument).setDrawColor.apply(r,c),"number"==typeof t.lineWidth&&this.jsPDFDocument.setLineWidth(t.lineWidth)}},e.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},e.prototype.rect=function(e,t,n,i,o){return this.jsPDFDocument.rect(e,t,n,i,o)},e.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},e.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},e.prototype.getDocument=function(){return this.jsPDFDocument},e.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},e.prototype.addPage=function(){return this.jsPDFDocument.addPage()},e.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},e.prototype.getGlobalOptions=function(){return x||{}},e.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},e.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return null==e.width&&(e={width:e.getWidth(),height:e.getHeight()}),e},e.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},e.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},e.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},e.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},e}(),b=function(e,t){return(b=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function j(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}"function"==typeof SuppressedError&&SuppressedError;var w=function(e){function t(t){var n=e.call(this)||this;return n._element=t,n}return j(t,e),t}(Array);function _(e,t,n){return n.applyStyles(t,!0),(Array.isArray(e)?e:[e]).map(function(e){return n.getTextWidth(e)}).reduce(function(e,t){return Math.max(e,t)},0)}function S(e,t,n,i){var o=t.settings.tableLineWidth,r=t.settings.tableLineColor;e.applyStyles({lineWidth:o,lineColor:r});var l=N(o,!1);l&&e.rect(n.x,n.y,t.getWidth(e.pageSize().width),i.y-n.y,l)}function N(e,t){var n=e>0,i=t||0===t;return n&&i?"DF":n?"S":i?"F":null}function C(e,t){var n,i,o,r;if(Array.isArray(e=e||t))if(e.length>=4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};else{if(3===e.length)return{top:e[0],right:e[1],bottom:e[2],left:e[1]};if(2===e.length)return{top:e[0],right:e[1],bottom:e[0],left:e[1]};e=1===e.length?e[0]:t}return"object"==typeof e?("number"==typeof e.vertical&&(e.top=e.vertical,e.bottom=e.vertical),"number"==typeof e.horizontal&&(e.right=e.horizontal,e.left=e.horizontal),{left:null!=(n=e.left)?n:t,top:null!=(i=e.top)?i:t,right:null!=(o=e.right)?o:t,bottom:null!=(r=e.bottom)?r:t}):("number"!=typeof e&&(e=t),{top:e,right:e,bottom:e,left:e})}function D(e,t){var n=C(t.settings.margin,0);return e.pageSize().width-(n.left+n.right)}function P(e,t){var n=function e(t,n){var i=n(t);return"rgba(0, 0, 0, 0)"!==i&&"transparent"!==i&&"initial"!==i&&"inherit"!==i?i:null==t.parentElement?null:e(t.parentElement,n)}(e,t);if(!n)return null;var i=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!i||!Array.isArray(i))return null;var o=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])];return 0===parseInt(i[4])||isNaN(o[0])||isNaN(o[1])||isNaN(o[2])?null:o}function W(e,t,n,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1);var r,l,s="string"==typeof t?n.document.querySelector(t):t,a=Object.keys(e.getFontList()),d=e.scaleFactor(),c=[],u=[],h=[];if(!s)return console.error("Html table could not be found with input: ",t),{head:c,body:u,foot:h};for(var m=0;m<s.rows.length;m++){var f=s.rows[m],g=null==(l=null==(r=null==f?void 0:f.parentElement)?void 0:r.tagName)?void 0:l.toLowerCase(),p=function(e,t,n,i,o,r){for(var l=new w(i),s=0;s<i.cells.length;s++){var a=i.cells[s],d=n.getComputedStyle(a);if(o||"none"!==d.display){var c=void 0;r&&(c=function(e,t,n,i,o){var r={},l=96/72,s=P(t,function(e){return o.getComputedStyle(e).backgroundColor});null!=s&&(r.fillColor=s);var a=P(t,function(e){return o.getComputedStyle(e).color});null!=a&&(r.textColor=a);var d=function(e,t){var n=[e.paddingTop,e.paddingRight,e.paddingBottom,e.paddingLeft],i=96/(72/t),o=(parseInt(e.lineHeight)-parseInt(e.fontSize))/t/2,r=C(n.map(function(e){return parseInt(e||"0")/i}),0);return o>r.top&&(r.top=o),o>r.bottom&&(r.bottom=o),r}(i,n);d&&(r.cellPadding=d);var c="borderTopColor",u=l*n,h=i.borderTopWidth;if(i.borderBottomWidth===h&&i.borderRightWidth===h&&i.borderLeftWidth===h){var m=(parseFloat(h)||0)/u;m&&(r.lineWidth=m)}else r.lineWidth={top:(parseFloat(i.borderTopWidth)||0)/u,right:(parseFloat(i.borderRightWidth)||0)/u,bottom:(parseFloat(i.borderBottomWidth)||0)/u,left:(parseFloat(i.borderLeftWidth)||0)/u},!r.lineWidth.top&&(r.lineWidth.right?c="borderRightColor":r.lineWidth.bottom?c="borderBottomColor":r.lineWidth.left&&(c="borderLeftColor"));var f=P(t,function(e){return o.getComputedStyle(e)[c]});null!=f&&(r.lineColor=f);var g=["left","right","center","justify"];-1!==g.indexOf(i.textAlign)&&(r.halign=i.textAlign),-1!==(g=["middle","bottom","top"]).indexOf(i.verticalAlign)&&(r.valign=i.verticalAlign);var p=parseInt(i.fontSize||"");isNaN(p)||(r.fontSize=p/l);var y=function(e){var t="";return("bold"===e.fontWeight||"bolder"===e.fontWeight||parseInt(e.fontWeight)>=700)&&(t="bold"),("italic"===e.fontStyle||"oblique"===e.fontStyle)&&(t+="italic"),t}(i);y&&(r.fontStyle=y);var x=(i.fontFamily||"").toLowerCase();return -1!==e.indexOf(x)&&(r.font=x),r}(e,a,t,d,n)),l.push({rowSpan:a.rowSpan,colSpan:a.colSpan,styles:c,_element:a,content:function(e){var t=e.cloneNode(!0);return t.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/ +/g," "),t.innerHTML=t.innerHTML.split(/<br.*?>/).map(function(e){return e.trim()}).join("\n"),t.innerText||t.textContent||""}(a)})}}var u=n.getComputedStyle(i);if(l.length>0&&(o||"none"!==u.display))return l}(a,d,n,f,i,o);p&&("thead"===g?c.push(p):"tfoot"===g?h.push(p):u.push(p))}return{head:c,body:u,foot:h}}function F(e,t,n,i,o){if(null==e)throw TypeError("Cannot convert undefined or null to object");for(var r=Object(e),l=1;l<arguments.length;l++){var s=arguments[l];if(null!=s)for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(r[a]=s[a])}return r}function T(e,t){for(var n,i,o,r,l,s,a,d,c,u,h,m,f,g,p,y,x,b,j,w,_,S,N,D,P,T,A,H,k,z=new v(e),I=z.getDocumentOptions(),R=z.getGlobalOptions(),E=0,B=[R,I,t];E<B.length;E++){var L=B[E];L&&"object"!=typeof L&&console.error("The options parameter should be of type object, is: "+typeof L),L.startY&&"number"!=typeof L.startY&&(console.error("Invalid value for startY option",L.startY),delete L.startY)}var O=F({},R,I,t);"undefined"!=typeof window&&(k=window);var Y=function(e,t,n){for(var i={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},o=function(o){if("columnStyles"===o)i.columnStyles=F({},e[o],t[o],n[o]);else{var r=[e,t,n].map(function(e){return e[o]||{}});i[o]=F({},r[0],r[1],r[2])}},r=0,l=Object.keys(i);r<l.length;r++)o(l[r]);return i}(R,I,t),M=function(e,t,n){for(var i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,r=[e,t,n];o<r.length;o++){var l=r[o];l.didParseCell&&i.didParseCell.push(l.didParseCell),l.willDrawCell&&i.willDrawCell.push(l.willDrawCell),l.didDrawCell&&i.didDrawCell.push(l.didDrawCell),l.willDrawPage&&i.willDrawPage.push(l.willDrawPage),l.didDrawPage&&i.didDrawPage.push(l.didDrawPage)}return i}(R,I,t),$=(n=z,N=C((i=O).margin,40/n.scaleFactor()),D=null!=(o=n,r=i.startY,l=o.getLastAutoTable(),s=o.scaleFactor(),a=o.pageNumber(),d=!1,l&&l.startPageNumber&&(d=l.startPageNumber+l.pageNumber-1===a),c="number"==typeof r?r:(null==r||!1===r)&&d&&(null==l?void 0:l.finalY)!=null?l.finalY+20/s:null)?c:N.top,_=!0===i.showFoot?"everyPage":!1===i.showFoot?"never":null!=(u=i.showFoot)?u:"everyPage",S=!0===i.showHead?"everyPage":!1===i.showHead?"never":null!=(h=i.showHead)?h:"everyPage",P=null!=(m=i.useCss)&&m,T=i.theme||(P?"plain":"striped"),A=!!i.horizontalPageBreak,H=null!=(f=i.horizontalPageBreakRepeat)?f:null,{includeHiddenHtml:null!=(g=i.includeHiddenHtml)&&g,useCss:P,theme:T,startY:D,margin:N,pageBreak:null!=(p=i.pageBreak)?p:"auto",rowPageBreak:null!=(y=i.rowPageBreak)?y:"auto",tableWidth:null!=(x=i.tableWidth)?x:"auto",showHead:S,showFoot:_,tableLineWidth:null!=(b=i.tableLineWidth)?b:0,tableLineColor:null!=(j=i.tableLineColor)?j:200,horizontalPageBreak:A,horizontalPageBreakRepeat:H,horizontalPageBreakBehaviour:null!=(w=i.horizontalPageBreakBehaviour)?w:"afterAllRows"}),U=function(e,t,n){var i,o,r,l,s,a=t.head||[],d=t.body||[],c=t.foot||[];if(t.html){var u=t.includeHiddenHtml;if(n){var h=W(e,t.html,n,u,t.useCss)||{};a=h.head||a,d=h.body||a,c=h.foot||a}else console.error("Cannot parse html in non browser environment")}return{columns:t.columns||(i=a,o=d,r=c,l=i[0]||o[0]||r[0]||[],s=[],Object.keys(l).filter(function(e){return"_element"!==e}).forEach(function(e){var t,n=1;"object"!=typeof(t=Array.isArray(l)?l[parseInt(e)]:l[e])||Array.isArray(t)||(n=(null==t?void 0:t.colSpan)||1);for(var i=0;i<n;i++){var o={dataKey:Array.isArray(l)?s.length:e+(i>0?"_".concat(i):"")};s.push(o)}}),s),head:a,body:d,foot:c}}(z,O,k);return{id:t.tableId,content:U,hooks:M,styles:Y,settings:$}}var A=function(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()},H=function(e){function t(t,n,i,o,r,l){var s=e.call(this,t,n,l)||this;return s.cell=i,s.row=o,s.column=r,s.section=o.section,s}return j(t,e),t}(A),k=function(){function e(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return e.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},e.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},e.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},e.prototype.callCellHooks=function(e,t,n,i,o,r){for(var l=0;l<t.length;l++){var s=!1===(0,t[l])(new H(e,this,n,i,o,r));if(n.text=Array.isArray(n.text)?n.text:[n.text],s)return!1}return!0},e.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++)(0,i[n])(new A(e,this,t))},e.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++)(0,i[n])(new A(e,this,t))},e.prototype.getWidth=function(e){if("number"==typeof this.settings.tableWidth)return this.settings.tableWidth;if("wrap"===this.settings.tableWidth)return this.columns.reduce(function(e,t){return e+t.wrappedWidth},0);var t=this.settings.margin;return e-t.left-t.right},e}(),z=function(){function e(e,t,n,i,o){void 0===o&&(o=!1),this.height=0,this.raw=e,e instanceof w&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=i,this.spansMultiplePages=o}return e.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(e,n){var i;return Math.max(e,(null==(i=t.cells[n.index])?void 0:i.height)||0)},0)},e.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(e){var n=t.cells[e.index];return!!n&&n.rowSpan>1}).length>0},e.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},e.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce(function(e,i){var o=n.cells[i.index];if(!o)return 0;var r=t.getLineHeight(o.styles.fontSize),l=o.padding("vertical")+r;return l>e?l:e},0)},e}(),I=function(){function e(e,t,n){this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var i,o=e;null==e||"object"!=typeof e||Array.isArray(e)?(this.rowSpan=1,this.colSpan=1):(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,o=null!=(i=e.content)?i:e,e._element&&(this.raw=e._element));var r=null!=o?""+o:"";this.text=r.split(/\r\n|\r|\n/g)}return e.prototype.getTextPos=function(){if("top"===this.styles.valign)e=this.y+this.padding("top");else if("bottom"===this.styles.valign)e=this.y+this.height-this.padding("bottom");else{var e,t,n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}if("right"===this.styles.halign)t=this.x+this.width-this.padding("right");else if("center"===this.styles.halign){var i=this.width-this.padding("horizontal");t=this.x+i/2+this.padding("left")}else t=this.x+this.padding("left");return{x:t,y:e}},e.prototype.getContentHeight=function(e,t){return void 0===t&&(t=1.15),Math.max((Array.isArray(this.text)?this.text.length:1)*(this.styles.fontSize/e*t)+this.padding("vertical"),this.styles.minCellHeight)},e.prototype.padding=function(e){var t=C(this.styles.cellPadding,0);return"vertical"===e?t.top+t.bottom:"horizontal"===e?t.left+t.right:t[e]},e}(),R=function(){function e(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return e.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,i=e.allRows();n<i.length;n++){var o=i[n].cells[this.index];o&&"number"==typeof o.styles.cellWidth&&(t=Math.max(t,o.styles.cellWidth))}return t},e}();function E(e,t,n){for(var i=t,o=e.reduce(function(e,t){return e+t.wrappedWidth},0),r=0;r<e.length;r++){var l=e[r],s=i*(l.wrappedWidth/o),a=l.width+s,d=n(l),c=a<d?d:a;t-=c-l.width,l.width=c}if(t=Math.round(1e10*t)/1e10){var u=e.filter(function(e){return!(t<0)||e.width>n(e)});u.length&&(t=E(u,t,n))}return t}function B(e,t,n,i,o){return e.map(function(e){var r=e,l=t,s=n,a=i,d=o,c=1e4*a.scaleFactor();if((l=Math.ceil(l*c)/c)>=_(r,s,a))return r;for(;l<_(r+d,s,a)&&!(r.length<=1);)r=r.substring(0,r.length-1);return r.trim()+d})}function L(e,t){var n,i,o,r,l,s,a,d,c=new v(e),u=function(e,t){var n=e.content,i=n.columns.map(function(e,t){var n;return new R("object"==typeof e&&null!=(n=e.dataKey)?n:t,e,t)});if(0===n.head.length){var o=Y(i,"head");o&&n.head.push(o)}if(0===n.foot.length){var o=Y(i,"foot");o&&n.foot.push(o)}var r=e.settings.theme,l=e.styles;return{columns:i,head:O("head",n.head,i,l,r,t),body:O("body",n.body,i,l,r,t),foot:O("foot",n.foot,i,l,r,t)}}(t,c.scaleFactor()),h=new k(t,u);return n=c,i=h,o=n.scaleFactor(),r=i.settings.horizontalPageBreak,l=D(n,i),i.allRows().forEach(function(e){for(var t=0,s=i.columns;t<s.length;t++){var a=s[t],d=e.cells[a.index];if(d){var c=i.hooks.didParseCell;i.callCellHooks(n,c,d,e,a,null);var u=d.padding("horizontal");d.contentWidth=_(d.text,d.styles,n)+u;var h=_(d.text.join(" ").split(/[^\S\u00A0]+/),d.styles,n);if(d.minReadableWidth=h+d.padding("horizontal"),"number"==typeof d.styles.cellWidth)d.minWidth=d.styles.cellWidth,d.wrappedWidth=d.styles.cellWidth;else if("wrap"===d.styles.cellWidth||!0===r)d.contentWidth>l?(d.minWidth=l,d.wrappedWidth=l):(d.minWidth=d.contentWidth,d.wrappedWidth=d.contentWidth);else{var m=10/o;d.minWidth=d.styles.minCellWidth||m,d.wrappedWidth=d.contentWidth,d.minWidth>d.wrappedWidth&&(d.wrappedWidth=d.minWidth)}}}}),i.allRows().forEach(function(e){for(var t=0,n=i.columns;t<n.length;t++){var o=n[t],r=e.cells[o.index];if(r&&1===r.colSpan)o.wrappedWidth=Math.max(o.wrappedWidth,r.wrappedWidth),o.minWidth=Math.max(o.minWidth,r.minWidth),o.minReadableWidth=Math.max(o.minReadableWidth,r.minReadableWidth);else{var l=i.styles.columnStyles[o.dataKey]||i.styles.columnStyles[o.index]||{},s=l.cellWidth||l.minCellWidth;s&&"number"==typeof s&&(o.minWidth=s,o.wrappedWidth=s)}r&&(r.colSpan>1&&!o.minWidth&&(o.minWidth=r.minWidth),r.colSpan>1&&!o.wrappedWidth&&(o.wrappedWidth=r.minWidth))}}),s=[],a=0,h.columns.forEach(function(e){var t=e.getMaxCustomCellWidth(h);t?e.width=t:(e.width=e.wrappedWidth,s.push(e)),a+=e.width}),(d=h.getWidth(c.pageSize().width)-a)&&(d=E(s,d,function(e){return Math.max(e.minReadableWidth,e.minWidth)})),d&&(d=E(s,d,function(e){return e.minWidth})),d=Math.abs(d),!h.settings.horizontalPageBreak&&d>.1/c.scaleFactor()&&(d=d<1?d:Math.round(d),console.log("Of the table content, ".concat(d," units width could not fit page"))),function(e){for(var t=e.allRows(),n=0;n<t.length;n++)for(var i=t[n],o=null,r=0,l=0,s=0;s<e.columns.length;s++){var a=e.columns[s];if((l-=1)>1&&e.columns[s+1])r+=a.width,delete i.cells[a.index];else if(o){var d=o;delete i.cells[a.index],o=null,d.width=a.width+r}else{var d=i.cells[a.index];if(!d)continue;if(l=d.colSpan,r=0,d.colSpan>1){o=d,r+=a.width;continue}d.width=a.width+r}}}(h),function(e,t){for(var n={count:0,height:0},i=0,o=e.allRows();i<o.length;i++){for(var r=o[i],l=0,s=e.columns;l<s.length;l++){var a=s[l],d=r.cells[a.index];if(d){t.applyStyles(d.styles,!0);var c=d.width-d.padding("horizontal");if("linebreak"===d.styles.overflow)d.text=t.splitTextToSize(d.text,c+1/t.scaleFactor(),{fontSize:d.styles.fontSize});else if("ellipsize"===d.styles.overflow)d.text=B(d.text,c,d.styles,t,"...");else if("hidden"===d.styles.overflow)d.text=B(d.text,c,d.styles,t,"");else if("function"==typeof d.styles.overflow){var u=d.styles.overflow(d.text,c);"string"==typeof u?d.text=[u]:d.text=u}d.contentHeight=d.getContentHeight(t.scaleFactor(),t.getLineHeightFactor());var h=d.contentHeight/d.rowSpan;d.rowSpan>1&&n.count*n.height<h*d.rowSpan?n={height:h,count:d.rowSpan}:n&&n.count>0&&n.height>h&&(h=n.height),h>r.height&&(r.height=h)}}n.count--}}(h,c),function(e){for(var t={},n=1,i=e.allRows(),o=0;o<i.length;o++)for(var r=i[o],l=0,s=e.columns;l<s.length;l++){var a=s[l],d=t[a.index];if(n>1)n--,delete r.cells[a.index];else if(d)d.cell.height+=r.height,n=d.cell.colSpan,delete r.cells[a.index],d.left--,d.left<=1&&delete t[a.index];else{var c=r.cells[a.index];if(!c)continue;if(c.height=r.height,c.rowSpan>1){var u=i.length-o,h=c.rowSpan>u?u:c.rowSpan;t[a.index]={cell:c,left:h,row:r}}}}}(h),c.applyStyles(c.userStyles),h}function O(e,t,n,i,o,r){var l={};return t.map(function(t,s){for(var a=0,d={},c=0,u=0,h=0;h<n.length;h++){var m=n[h];if(null==l[m.index]||0===l[m.index].left)if(0===u){var f=void 0;f=Array.isArray(t)?t[m.index-c-a]:t[m.dataKey];var g={};"object"!=typeof f||Array.isArray(f)||(g=(null==f?void 0:f.styles)||{});var p=new I(f,function(e,t,n,i,o,r,l){var s,a={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}}[i];"head"===e?s=o.headStyles:"body"===e?s=o.bodyStyles:"foot"===e&&(s=o.footStyles);var d=F({},a.table,a[e],o.styles,s),c=o.columnStyles[t.dataKey]||o.columnStyles[t.index]||{},u="body"===e&&n%2==0?F({},a.alternateRow,o.alternateRowStyles):{},h=F({},{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/r,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0},d,u,"body"===e?c:{});return F(h,l)}(e,m,s,o,i,r,g),e);d[m.dataKey]=p,d[m.index]=p,u=p.colSpan-1,l[m.index]={left:p.rowSpan-1,times:u}}else u--,c++;else l[m.index].left--,u=l[m.index].times,a++}return new z(t,s,e,d)})}function Y(e,t){var n={};return e.forEach(function(e){if(null!=e.raw){var i=function(e,t){if("head"===e){if("object"==typeof t)return t.header||null;else if("string"==typeof t||"number"==typeof t)return t}else if("foot"===e&&"object"==typeof t)return t.footer;return null}(t,e.raw);null!=i&&(n[e.dataKey]=i)}}),Object.keys(n).length>0?n:null}function M(e,t){var n=t.settings,i=n.startY,o=n.margin,r={x:o.left,y:i},l=t.getHeadHeight(t.columns)+t.getFootHeight(t.columns),s=i+o.bottom+l;"avoid"===n.pageBreak&&(s+=t.body.reduce(function(e,t){return e+t.height},0));var a=new v(e);("always"===n.pageBreak||null!=n.startY&&s>a.pageSize().height)&&(Z(a),r.y=o.top),t.callWillDrawPageHooks(a,r);var d=F({},r);t.startPageNumber=a.pageNumber(),n.horizontalPageBreak?function(e,t,n,i){var o=function(e,t){for(var n=[],i=0;i<t.columns.length;i++){var o=function(e,t,n){void 0===n&&(n={});var i,o=D(e,t),r=new Map,l=[],s=[],a=[];Array.isArray(t.settings.horizontalPageBreakRepeat)?a=t.settings.horizontalPageBreakRepeat:("string"==typeof t.settings.horizontalPageBreakRepeat||"number"==typeof t.settings.horizontalPageBreakRepeat)&&(a=[t.settings.horizontalPageBreakRepeat]),a.forEach(function(e){var n=t.columns.find(function(t){return t.dataKey===e||t.index===e});n&&!r.has(n.index)&&(r.set(n.index,!0),l.push(n.index),s.push(t.columns[n.index]),o-=n.wrappedWidth)});for(var d=!0,c=null!=(i=null==n?void 0:n.start)?i:0;c<t.columns.length;){if(r.has(c)){c++;continue}var u=t.columns[c].wrappedWidth;if(d||o>=u)d=!1,l.push(c),s.push(t.columns[c]),o-=u;else break;c++}return{colIndexes:l,columns:s,lastIndex:c-1}}(e,t,{start:i});o.columns.length&&(n.push(o),i=o.lastIndex)}return n}(e,t);if("afterAllRows"===t.settings.horizontalPageBreakBehaviour)o.forEach(function(o,r){var l,s,a,d,c;e.applyStyles(e.userStyles),r>0?J(e,t,n,i,o.columns,!0):$(e,t,i,o.columns),l=e,s=t,a=n,d=i,c=o.columns,l.applyStyles(l.userStyles),s.body.forEach(function(e,t){var n=t===s.body.length-1;V(l,s,e,n,a,d,c)}),K(e,t,i,o.columns)});else for(var r=-1,l=o[0];r<t.body.length-1;)!function(){var s=r;if(l){e.applyStyles(e.userStyles);var a=l.columns;r>=0?J(e,t,n,i,a,!0):$(e,t,i,a),s=U(e,t,r+1,i,a),K(e,t,i,a)}var d=s-r;o.slice(1).forEach(function(o){e.applyStyles(e.userStyles),J(e,t,n,i,o.columns,!0),U(e,t,r+1,i,o.columns,d),K(e,t,i,o.columns)}),r=s}()}(a,t,d,r):(a.applyStyles(a.userStyles),("firstPage"===n.showHead||"everyPage"===n.showHead)&&t.head.forEach(function(e){return G(a,t,e,r,t.columns)}),a.applyStyles(a.userStyles),t.body.forEach(function(e,n){var i=n===t.body.length-1;V(a,t,e,i,d,r,t.columns)}),a.applyStyles(a.userStyles),("lastPage"===n.showFoot||"everyPage"===n.showFoot)&&t.foot.forEach(function(e){return G(a,t,e,r,t.columns)})),S(a,t,d,r),t.callEndPageHooks(a,r),t.finalY=r.y,e.lastAutoTable=t,a.applyStyles(a.userStyles)}function $(e,t,n,i){var o=t.settings;e.applyStyles(e.userStyles),("firstPage"===o.showHead||"everyPage"===o.showHead)&&t.head.forEach(function(o){return G(e,t,o,n,i)})}function U(e,t,n,i,o,r){e.applyStyles(e.userStyles);var l=Math.min(n+(r=null!=r?r:t.body.length),t.body.length),s=-1;return t.body.slice(n,l).forEach(function(r,l){var a=n+l===t.body.length-1,d=q(e,t,a,i);r.canEntireRowFit(d,o)&&(G(e,t,r,i,o),s=n+l)}),s}function K(e,t,n,i){var o=t.settings;e.applyStyles(e.userStyles),("lastPage"===o.showFoot||"everyPage"===o.showFoot)&&t.foot.forEach(function(o){return G(e,t,o,n,i)})}function V(e,t,n,i,o,r,l){var s=q(e,t,i,r);if(n.canEntireRowFit(s,l))G(e,t,n,r,l);else if(function(e,t,n,i){var o=e.pageSize().height,r=i.settings.margin,l=o-(r.top+r.bottom);"body"===t.section&&(l-=i.getHeadHeight(i.columns)+i.getFootHeight(i.columns));var s=t.getMinimumRowHeight(i.columns,e);if(s>l)return console.log("Will not be able to print row ".concat(t.index," correctly since it's minimum height is larger than page height")),!0;if(!(s<n))return!1;var a=t.hasRowSpan(i.columns);return t.getMaxCellHeight(i.columns)>l?(a&&console.log("The content of row ".concat(t.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!a&&"avoid"!==i.settings.rowPageBreak}(e,n,s,t)){var a=function(e,t,n,i){var o={};e.spansMultiplePages=!0,e.height=0;for(var r=0,l=0,s=n.columns;l<s.length;l++){var a=s[l],d=e.cells[a.index];if(d){Array.isArray(d.text)||(d.text=[d.text]);var c=new I(d.raw,d.styles,d.section);(c=F(c,d)).text=[];var u=function(e,t,n){var i=n.getLineHeight(e.styles.fontSize);return Math.max(0,Math.floor((t-e.padding("vertical"))/i))}(d,t,i);d.text.length>u&&(c.text=d.text.splice(u,d.text.length));var h=i.scaleFactor(),m=i.getLineHeightFactor();d.contentHeight=d.getContentHeight(h,m),d.contentHeight>=t&&(d.contentHeight=t,c.styles.minCellHeight-=t),d.contentHeight>e.height&&(e.height=d.contentHeight),c.contentHeight=c.getContentHeight(h,m),c.contentHeight>r&&(r=c.contentHeight),o[a.index]=c}}var f=new z(e.raw,-1,e.section,o,!0);f.height=r;for(var g=0,p=n.columns;g<p.length;g++){var a=p[g],c=f.cells[a.index];c&&(c.height=f.height);var d=e.cells[a.index];d&&(d.height=e.height)}return f}(n,s,t,e);G(e,t,n,r,l),J(e,t,o,r,l),V(e,t,a,i,o,r,l)}else J(e,t,o,r,l),V(e,t,n,i,o,r,l)}function G(e,t,n,i,o){i.x=t.settings.margin.left;for(var r=0;r<o.length;r++){var l=o[r],s=n.cells[l.index];if(!s||(e.applyStyles(s.styles),s.x=i.x,s.y=i.y,!1===t.callCellHooks(e,t.hooks.willDrawCell,s,n,l,i))){i.x+=l.width;continue}!function(e,t,n){var i=t.styles;if(e.getDocument().setFillColor(e.getDocument().getFillColor()),"number"==typeof i.lineWidth){var o=N(i.lineWidth,i.fillColor);o&&e.rect(t.x,n.y,t.width,t.height,o)}else"object"==typeof i.lineWidth&&(i.fillColor&&e.rect(t.x,n.y,t.width,t.height,"F"),function(e,t,n,i){var o,r,l,s;function a(t,n,i,o,r){e.getDocument().setLineWidth(t),e.getDocument().line(n,i,o,r,"S")}i.top&&(o=n.x,r=n.y,l=n.x+t.width,s=n.y,i.right&&(l+=.5*i.right),i.left&&(o-=.5*i.left),a(i.top,o,r,l,s)),i.bottom&&(o=n.x,r=n.y+t.height,l=n.x+t.width,s=n.y+t.height,i.right&&(l+=.5*i.right),i.left&&(o-=.5*i.left),a(i.bottom,o,r,l,s)),i.left&&(o=n.x,r=n.y,l=n.x,s=n.y+t.height,i.top&&(r-=.5*i.top),i.bottom&&(s+=.5*i.bottom),a(i.left,o,r,l,s)),i.right&&(o=n.x+t.width,r=n.y,l=n.x+t.width,s=n.y+t.height,i.top&&(r-=.5*i.top),i.bottom&&(s+=.5*i.bottom),a(i.right,o,r,l,s))}(e,t,n,i.lineWidth))}(e,s,i);var a=s.getTextPos();y(s.text,a.x,a.y,{halign:s.styles.halign,valign:s.styles.valign,maxWidth:Math.ceil(s.width-s.padding("left")-s.padding("right"))},e.getDocument()),t.callCellHooks(e,t.hooks.didDrawCell,s,n,l,i),i.x+=l.width}i.y+=n.height}function q(e,t,n,i){var o=t.settings.margin.bottom,r=t.settings.showFoot;return("everyPage"===r||"lastPage"===r&&n)&&(o+=t.getFootHeight(t.columns)),e.pageSize().height-i.y-o}function J(e,t,n,i,o,r){void 0===o&&(o=[]),void 0===r&&(r=!1),e.applyStyles(e.userStyles),"everyPage"!==t.settings.showFoot||r||t.foot.forEach(function(n){return G(e,t,n,i,o)}),t.callEndPageHooks(e,i);var l=t.settings.margin;S(e,t,n,i),Z(e),t.pageNumber++,i.x=l.left,i.y=l.top,n.y=l.top,t.callWillDrawPageHooks(e,i),"everyPage"===t.settings.showHead&&(t.head.forEach(function(n){return G(e,t,n,i,o)}),e.applyStyles(e.userStyles))}function Z(e){var t=e.pageNumber();return e.setPage(t+1),e.pageNumber()===t&&(e.addPage(),!0)}function Q(e,t){var n=T(e,t),i=L(e,n);M(e,i)}try{if("undefined"!=typeof window&&window){var X=window,ee=X.jsPDF||(null==(t=X.jspdf)?void 0:t.jsPDF);ee&&(ee.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return M(this,L(this,T(this,e[0]))),this},ee.API.lastAutoTable=!1,ee.API.autoTableText=function(e,t,n,i){y(e,t,n,i,this)},ee.API.autoTableSetDefaults=function(e){return v.setDefaults(e,this),this},ee.autoTableSetDefaults=function(e,t){v.setDefaults(e,t)},ee.API.autoTableHtmlToJson=function(e,t){if(void 0===t&&(t=!1),"undefined"==typeof window)return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var n,i=W(new v(this),e,window,t,!1),o=i.head,r=i.body;return{columns:(null==(n=o[0])?void 0:n.map(function(e){return e.content}))||[],rows:r,data:r}})}}catch(e){console.error("Could not apply autoTable plugin",e)}function et(e,t,n){e.setFillColor(41,128,185),e.rect(10,n-2,190,8,"F"),e.setTextColor(255,255,255),e.setFontSize(12),e.setFont("helvetica","bold"),e.text(t,12,n+3.5),e.setTextColor(0,0,0),e.setFont("helvetica","normal")}function en(){let[e,t]=(0,h.useState)([]),[y,x]=(0,h.useState)(0),[v,b]=(0,h.useState)(10),[j,w]=(0,h.useState)(1),[_,S]=(0,h.useState)(!0),[N,C]=(0,h.useState)(null),[D,P]=(0,h.useState)({}),{user:W}=(0,g.useAuthStore)(),F=async e=>{if(N===e)return void C(null);if(C(e),!D[e])try{let t=await fetch(`/api/onboarding/customers/${e}`,{credentials:"include"}),n=await t.json();n.status&&P(t=>({...t,[e]:n.data}))}catch{}};return(0,h.useEffect)(()=>{!async function(){S(!0);let e=await fetch(`/api/onboarding/customers?limit=${v}&offset=${j}`,{credentials:"include"}),n=await e.json();n.status&&n.data&&(t(n.data.items),x(n.data.total)),S(!1)}()},[v,j]),(0,n.jsxs)("div",{className:"space-y-6 max-w-7xl",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(l.Users,{className:"w-6 h-6"}),(0,n.jsx)("h1",{className:"text-2xl font-semibold",children:"Onboarded Customers"})]}),(0,n.jsx)(i.Card,{children:(0,n.jsxs)(i.CardContent,{className:"pt-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)(u.Select,{defaultValue:"all",children:[(0,n.jsx)(u.SelectTrigger,{className:"w-40",children:(0,n.jsx)(u.SelectValue,{placeholder:"All Users"})}),(0,n.jsxs)(u.SelectContent,{children:[(0,n.jsx)(u.SelectItem,{value:"all",children:"All Users"}),(0,n.jsx)(u.SelectItem,{value:"individual",children:"Individual"}),(0,n.jsx)(u.SelectItem,{value:"corporate",children:"Corporate"})]})]}),(0,n.jsxs)(o.Button,{variant:"outline",size:"sm",children:[(0,n.jsx)(d.Eye,{className:"w-4 h-4 mr-2"}),"All Users"]}),(0,n.jsxs)(o.Button,{variant:"outline",size:"sm",children:[(0,n.jsx)(s.Download,{className:"w-4 h-4 mr-2"}),"Download All"]})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(a.Search,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground"}),(0,n.jsx)(r.Input,{placeholder:"Search users...",className:"pl-9 w-80"})]}),(0,n.jsxs)(u.Select,{defaultValue:"10",children:[(0,n.jsx)(u.SelectTrigger,{className:"w-32",children:(0,n.jsx)(u.SelectValue,{})}),(0,n.jsxs)(u.SelectContent,{children:[(0,n.jsx)(u.SelectItem,{value:"10",children:"10 rows"}),(0,n.jsx)(u.SelectItem,{value:"25",children:"25 rows"}),(0,n.jsx)(u.SelectItem,{value:"50",children:"50 rows"})]})]})]})]}),(0,n.jsx)("div",{className:"border rounded-lg overflow-hidden",children:_?(0,n.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:"Loading customers..."}):(0,n.jsxs)("table",{className:"w-full",children:[(0,n.jsx)("thead",{className:"bg-slate-50 border-b",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"text-left p-4 font-medium text-sm",children:"Name"}),(0,n.jsx)("th",{className:"text-left p-4 font-medium text-sm",children:"Country"}),(0,n.jsx)("th",{className:"text-left p-4 font-medium text-sm",children:"Email"}),(0,n.jsx)("th",{className:"text-left p-4 font-medium text-sm",children:"Customer Type"}),(0,n.jsx)("th",{className:"text-left p-4 font-medium text-sm",children:"Status"}),(0,n.jsx)("th",{className:"text-left p-4 font-medium text-sm",children:"Created Date"}),(0,n.jsx)("th",{className:"text-left p-4 font-medium text-sm",children:"Risk Score"})]})}),(0,n.jsx)("tbody",{children:e.map(e=>{let t,i,r,l,s,a;return(0,n.jsxs)(h.Fragment,{children:[(0,n.jsxs)("tr",{className:"border-b hover:bg-slate-50",children:[(0,n.jsx)("td",{className:"p-4",children:(0,n.jsxs)("button",{className:"flex items-center gap-2",type:"button",onClick:()=>F(e.id),children:[(0,n.jsx)(c.Building2,{className:"w-4 h-4 text-muted-foreground cursor-pointer"}),(0,n.jsx)("span",{className:"font-medium",children:e.name||"-"})]})}),(0,n.jsx)("td",{className:"p-4",children:e.country||"-"}),(0,n.jsx)("td",{className:"p-4 text-muted-foreground",children:e.email||"-"}),(0,n.jsx)("td",{className:"p-4 text-muted-foreground",children:"individual"===e.customer_type?"Individual":"Corporate"}),(0,n.jsx)("td",{className:"p-4",children:(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:e.status})}),(0,n.jsx)("td",{className:"p-4",children:new Date(e.created_at).toLocaleDateString()}),(0,n.jsx)("td",{className:"p-4",children:(0,n.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:e.risk_level?`${e.risk_level} - Medium Risk`:"-"})})]}),N===e.id&&(0,n.jsx)("tr",{className:"bg-white",children:(0,n.jsx)("td",{colSpan:7,className:"p-4",children:D[e.id]?(i="corporate"===(t=D[e.id]).customer_type,r=t.corporate_detail,l=t.individual_detail,a=(s=[t.corporate_detail?.related_persons,t.corporate_related_persons,t.corporate_detail?.partners,t.related_persons,t.partners,t.corporate_detail?.ubo_partners].filter(e=>Array.isArray(e)).reduce((e,t)=>e.concat(t),[])).length,(0,n.jsxs)("div",{className:"border rounded-lg",children:[(0,n.jsxs)("div",{className:"flex items-center justify-end gap-2 p-2",children:[W?.role!=="Analyst"&&(0,n.jsx)(m.default,{href:`/dashboard/onboarding/customer/edit/${e.id}`,children:(0,n.jsx)(o.Button,{variant:"outline",size:"sm",children:"Edit User"})}),(0,n.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>(function(e){let t=new p.jsPDF,n="corporate"===e.customer_type,i=e.corporate_detail,o=e.individual_detail,r=[41,128,185],l=[236,240,241];t.setFillColor(...r),t.rect(0,0,210,40,"F"),t.setTextColor(255,255,255),t.setFontSize(24),t.setFont("helvetica","bold"),t.text("Customer Details Report",105,20,{align:"center"}),t.setFontSize(10),t.setFont("helvetica","normal"),t.text(`Generated on: ${new Date().toLocaleString()}`,105,30,{align:"center"});let s=50;if(t.setFillColor(...l),t.roundedRect(10,s,60,8,2,2,"F"),t.setTextColor(52,73,94),t.setFontSize(9),t.setFont("helvetica","bold"),t.text(n?"CORPORATE CUSTOMER":"INDIVIDUAL CUSTOMER",40,s+5.5,{align:"center"}),et(t,"Basic Information",s+=15),Q(t,{startY:s+=10,head:[],body:[["Customer ID",e.id.toString()],["Name",n?i?.company_name||e.name||"-":o?`${o.first_name} ${o.last_name}`:e.name||"-"],["Email",n?e.email:o?.email||"-"],["Customer Type",n?"Corporate":"Individual"],["Status",e.status||"Onboarded"],["Risk Level",e.risk_level?`${e.risk_level} - Medium Risk`:"-"],["Created Date",new Date(e.created_at).toLocaleDateString()]],theme:"grid",headStyles:{fillColor:r},columnStyles:{0:{cellWidth:60,fontStyle:"bold",fillColor:l},1:{cellWidth:130}},margin:{left:10,right:10}}),s=t.lastAutoTable.finalY+10,n){et(t,"Company Information",s),Q(t,{startY:s+=10,body:[["Company Name",i?.company_name||"-"],["Company Address",i?.company_address||"-"],["City",i?.city||"-"],["Country of Incorporation",i?.country_incorporated||"-"],["P.O. Box",i?.po_box||"-"],["Office Contact",i?.office_no?`+${i.office_country_code||""} ${i.office_no}`:"-"],["Mobile Contact",i?.mobile_no?`+${i.mobile_country_code||""} ${i.mobile_no}`:"-"],["Email",i?.email||"-"]],theme:"grid",columnStyles:{0:{cellWidth:60,fontStyle:"bold",fillColor:l},1:{cellWidth:130}},margin:{left:10,right:10}}),(s=t.lastAutoTable.finalY+10)>250&&(t.addPage(),s=20),et(t,"License Information",s),Q(t,{startY:s+=10,body:[["Trade License No",i?.trade_license_no||"-"],["Issued At",i?.trade_license_issued_at||"-"],["Issued By",i?.trade_license_issued_by||"-"],["Issue Date",i?.license_issue_date||"-"],["Expiry Date",i?.license_expiry_date||"-"],["VAT Registration No",i?.vat_registration_no||"-"],["Tenancy Contract Expiry",i?.tenancy_contract_expiry_date||"-"]],theme:"grid",columnStyles:{0:{cellWidth:60,fontStyle:"bold",fillColor:l},1:{cellWidth:130}},margin:{left:10,right:10}}),(s=t.lastAutoTable.finalY+10)>250&&(t.addPage(),s=20),et(t,"Business Details",s),Q(t,{startY:s+=10,body:[["Entity Type",i?.entity_type||"-"],["Business Activity",i?.business_activity||"-"],["Import/Export",i?.is_entity_dealting_with_import_export?"Yes":"No"],["Sister Concern",i?.has_sister_concern?"Yes":"No"],["Account Holding Bank",i?.account_holding_bank_name||"-"],["Product Source",i?.product_source||"-"],["Payment Mode",i?.payment_mode||"-"],["Delivery Channel",i?.delivery_channel||"-"],["Expected Transactions",i?.expected_no_of_transactions?.toString()||"-"],["Expected Volume",i?.expected_volume?.toString()||"-"],["Dual Use Goods",i?.dual_use_goods?"Yes":"No"],["Countries of Operation",Array.isArray(e.country_operations)?e.country_operations.map(e=>e.country||e).join(", "):"-"]],theme:"grid",columnStyles:{0:{cellWidth:60,fontStyle:"bold",fillColor:l},1:{cellWidth:130}},margin:{left:10,right:10}}),s=t.lastAutoTable.finalY+10;let n=[...e.corporate_related_persons||[],...e.related_persons||[]];n.length>0&&(s>250&&(t.addPage(),s=20),et(t,`Partners / UBOs (${n.length})`,s),Q(t,{startY:s+=10,head:[["Name","Role","Nationality","Ownership %","PEP"]],body:n.map(e=>[e.name||"-",e.role||"-",e.nationality||"-",e.ownership_percentage?.toString()||"-",e.is_pep?"Yes":"No"]),theme:"striped",headStyles:{fillColor:r},margin:{left:10,right:10}}),s=t.lastAutoTable.finalY+10)}else et(t,"Personal Information",s),Q(t,{startY:s+=10,body:[["First Name",o?.first_name||"-"],["Last Name",o?.last_name||"-"],["Date of Birth",o?.dob||"-"],["Gender",o?.gender||"-"],["Nationality",o?.nationality||"-"],["Place of Birth",o?.place_of_birth||"-"],["Residential Status",o?.residential_status||"-"]],theme:"grid",columnStyles:{0:{cellWidth:60,fontStyle:"bold",fillColor:l},1:{cellWidth:130}},margin:{left:10,right:10}}),(s=t.lastAutoTable.finalY+10)>250&&(t.addPage(),s=20),et(t,"Contact & Address Information",s),Q(t,{startY:s+=10,body:[["Address",o?.address||"-"],["City",o?.city||"-"],["Country",o?.country||"-"],["Country of Residence",o?.country_of_residence||"-"],["Contact Number",o?.contact_no?`+${o.country_code||""} ${o.contact_no}`:"-"],["Email",o?.email||"-"]],theme:"grid",columnStyles:{0:{cellWidth:60,fontStyle:"bold",fillColor:l},1:{cellWidth:130}},margin:{left:10,right:10}}),(s=t.lastAutoTable.finalY+10)>250&&(t.addPage(),s=20),et(t,"Occupation & Financial Details",s),Q(t,{startY:s+=10,body:[["Occupation",o?.occupation||"-"],["Source of Income",o?.source_of_income||"-"],["Purpose of Onboarding",o?.purpose_of_onboarding||"-"],["Payment Mode",o?.payment_mode||"-"],["Mode of Approach",o?.mode_of_approach||"-"],["Expected Transactions",o?.expected_no_of_transactions?.toString()||"-"],["Expected Volume",o?.expected_volume?.toString()||"-"]],theme:"grid",columnStyles:{0:{cellWidth:60,fontStyle:"bold",fillColor:l},1:{cellWidth:130}},margin:{left:10,right:10}}),(s=t.lastAutoTable.finalY+10)>250&&(t.addPage(),s=20),et(t,"Identification Details",s),Q(t,{startY:s+=10,body:[["ID Type",o?.id_type||"-"],["ID Number",o?.id_no||"-"],["Issuing Authority",o?.issuing_authority||"-"],["Issuing Country",o?.issuing_country||"-"],["Issue Date",o?.id_issue_date||"-"],["Expiry Date",o?.id_expiry_date||"-"]],theme:"grid",columnStyles:{0:{cellWidth:60,fontStyle:"bold",fillColor:l},1:{cellWidth:130}},margin:{left:10,right:10}}),s=t.lastAutoTable.finalY+10;s>250&&(t.addPage(),s=20),et(t,"Risk & Compliance",s),Q(t,{startY:s+=10,body:[["PEP Status",n?"-":o?.is_pep?"Yes":"No"],["Dual Nationality",n?"-":o?.dual_nationality?"Yes":"No"],["Adverse News",n?i?.is_entity_having_adverse_news?"Yes":"No":o?.adverse_news?"Yes":"No"],["Screening Fuzziness",e.screening_fuzziness||"-"],["KYC Documents Collected",n?i?.kyc_documents_collected_with_form?"Yes":"No":"-"],["Registered in GOAML",n?i?.is_entity_registered_in_GOAML?"Yes":"No":"-"]],theme:"grid",columnStyles:{0:{cellWidth:60,fontStyle:"bold",fillColor:l},1:{cellWidth:130}},margin:{left:10,right:10}}),s=t.lastAutoTable.finalY+10,e.documents&&e.documents.length>0&&(s>250&&(t.addPage(),s=20),et(t,`Uploaded Documents (${e.documents.length})`,s),Q(t,{startY:s+=10,head:[["File Name","Type","Upload Date"]],body:e.documents.map(e=>[e.file_name||"-",e.document_type||"-",new Date(e.created_at).toLocaleDateString()]),theme:"striped",headStyles:{fillColor:r},margin:{left:10,right:10}}));let a=t.internal.getNumberOfPages();for(let e=1;e<=a;e++)t.setPage(e),t.setFontSize(8),t.setTextColor(128,128,128),t.text(`Page ${e} of ${a}`,105,290,{align:"center"}),t.text("Confidential - For Internal Use Only",105,285,{align:"center"});let d=`Customer_${e.id}_${n?i?.company_name:`${o?.first_name}_${o?.last_name}`}_${new Date().getTime()}.pdf`;t.save(d.replace(/[^a-zA-Z0-9._-]/g,"_"))})(t),children:"Download Details"}),(0,n.jsx)(o.Button,{variant:"outline",size:"sm",onClick:()=>C(null),children:"Close"})]}),(0,n.jsxs)(f.Tabs,{defaultValue:"company-info",className:"p-4",children:[(0,n.jsxs)(f.TabsList,{children:[(0,n.jsx)(f.TabsTrigger,{value:"company-info",children:"Company Info"}),(0,n.jsx)(f.TabsTrigger,{value:"license-info",children:"License Info"}),(0,n.jsx)(f.TabsTrigger,{value:"business-details",children:"Business Details"}),(0,n.jsxs)(f.TabsTrigger,{value:"partners",children:["Partners",a?` (${a})`:""]}),(0,n.jsx)(f.TabsTrigger,{value:"documents",children:"Documents"}),(0,n.jsx)(f.TabsTrigger,{value:"risk-details",children:"Risk Details"}),(0,n.jsx)(f.TabsTrigger,{value:"sanction-details",children:"Sanction Details"})]}),(0,n.jsx)(f.TabsContent,{value:"company-info",children:(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Company Name:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:i?r?.company_name||t.name||"-":l?`${l.first_name} ${l.last_name}`:t.name||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Email:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:i?t.email||"-":l?.email||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Company Address:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:i?r?.company_address||"-":l?.address||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"City:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:i?r?.city||"-":l?.city||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Country of Incorporation:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:i?r?.country_incorporated||"-":l?.country||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"PO Box No:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:i&&r?.po_box||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Contact Office No:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:i?t.contact_office_number||"-":l?.contact_no||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Contact Mobile No:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:i?t.contact_mobile_number||"-":l?.contact_no||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Corporate Status:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:t.status||"Onboarded"})]})]})}),(0,n.jsx)(f.TabsContent,{value:"license-info",children:i?(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Trade License/CR No:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:r?.trade_license_no||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Issued At:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:r?.trade_license_issued_at||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Issued By:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:r?.trade_license_issued_by||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Issue Date:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:r?.license_issue_date||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Expiry Date:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:r?.license_expiry_date||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"VAT Registration No:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:r?.vat_registration_no||"-"})]})]}):(0,n.jsx)("div",{className:"text-sm text-muted-foreground mt-4",children:"No license info for individual customers."})}),(0,n.jsx)(f.TabsContent,{value:"business-details",children:i?(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Entity Type:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:r?.entity_type||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Business Activity:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:r?.business_activity||"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Countries of Operation:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:Array.isArray(t.country_operations)&&t.country_operations.length>0?t.country_operations.join(", "):"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Account Holding Bank Name:"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:r?.account_holding_bank_name||"-"})]})]}):(0,n.jsx)("div",{className:"text-sm text-muted-foreground mt-4",children:"No business details for individual customers."})}),(0,n.jsx)(f.TabsContent,{value:"partners",children:Array.isArray(s)&&s.length>0?(0,n.jsx)("div",{className:"space-y-4 mt-4",children:s.map((e,t)=>{let i=e.type||e.person_type||e.entity_type||(e.is_entity?"Entity":e.is_individual?"Individual":"-"),o=e.name||[e.first_name,e.last_name].filter(Boolean).join(" ")||e.entity_name||"-",r=e.nationality||e.country||e.country_of_residence||"-",l=e.role||e.designation||e.relationship||e.position||"-",s=e.ownership_percentage??e.share_percentage??e.ownership??"-",a=e.id_type||e.identification_type||e.document_type||"-",d=e.id_number||e.id_no||e.identification_number||e.document_number||"-",c=e.is_pep??e.pep??e.politically_exposed_person,u=c;if("boolean"==typeof c)u=c?"Yes":"No";else if("number"==typeof c)u=1===c?"Yes":"No";else if("string"==typeof c){let e=c.toLowerCase();u=["1","true","yes","y"].includes(e)?"Yes":["0","false","no","n"].includes(e)?"No":c}let h=e.dob||e.date_of_birth||"-",m=e.id_issue||e.id_issued||e.issue_date||"-",f=e.id_expiry||e.expiry_date||"-",g=e.id??`${o}-${r}-${t}`;return(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 border rounded p-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Type"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:i})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Name"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:o})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Nationality"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:r})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Role"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:l})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Ownership %"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:s})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"ID Type"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:a})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"ID Number"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:d})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"PEP"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:u})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"DOB"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:h})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"ID Issue"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:m})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"ID Expiry"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:f})]})]},g)})}):(0,n.jsx)("div",{className:"text-sm text-muted-foreground mt-4",children:"No partners/UBOs available."})}),(0,n.jsx)(f.TabsContent,{value:"documents",children:Array.isArray(t.documents)&&t.documents.length>0?(0,n.jsx)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:t.documents.map(e=>(0,n.jsxs)("div",{className:"border rounded p-3",children:[(0,n.jsx)("div",{className:"text-sm font-medium mb-2",children:e.file_name}),(0,n.jsx)("a",{href:`http://127.0.0.1:8000/storage/${e.file_path}`,target:"_blank",rel:"noreferrer",className:"text-blue-600 text-sm underline",children:"View"})]},e.id))}):(0,n.jsx)("div",{className:"text-sm text-muted-foreground mt-4",children:"No documents uploaded."})}),(0,n.jsx)(f.TabsContent,{value:"risk-details",children:(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Risk Level"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:t.risk_level??"-"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-muted-foreground",children:"Screening Fuzziness"}),(0,n.jsx)("div",{className:"mt-1 p-2 border rounded",children:t.screening_fuzziness||"-"})]})]})}),(0,n.jsx)(f.TabsContent,{value:"sanction-details",children:(0,n.jsx)("div",{className:"text-sm text-muted-foreground mt-4",children:"No sanction details available."})})]})]})):(0,n.jsx)("div",{className:"p-4 text-sm text-muted-foreground",children:"Loading details..."})})})]},e.id)})})]})}),(0,n.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,n.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Showing ",j," to ",Math.min(j+v-1,y)," of ",y," customers"]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)(o.Button,{variant:"outline",size:"sm",disabled:1===j,onClick:()=>w(Math.max(1,j-v)),children:"Previous"}),(0,n.jsx)(o.Button,{variant:"outline",size:"sm",disabled:j+v>y,onClick:()=>w(j+v),children:"Next"})]})]})]})})]})}e.s(["default",()=>en],16348)}]);
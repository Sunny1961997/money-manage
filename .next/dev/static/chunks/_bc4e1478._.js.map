{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/sunny/Documents/sanction/lib/auth.ts"],"sourcesContent":["const API_BASE_URL = process.env.NEXT_PUBLIC_API_BASE_URL; \n\nexport interface User {\n  id: number\n  name: string\n  email: string\n  phone?: string\n  role: string\n  email_verified_at?: string\n  created_at?: string\n  updated_at?: string\n}\n\nexport interface LoginResponse {\n  status: boolean\n  message: string\n  data: {\n    user: User\n    token: string\n  }\n}\n\nexport interface LogoutResponse {\n  status: boolean\n  message: string\n  data: unknown[]\n}\n\nexport async function login(email: string, password: string): Promise<{ user: User; token: string }> {\n  console.log(\"API_BASE_URL\", API_BASE_URL);\n  const response = await fetch(`${API_BASE_URL}/login`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    credentials: \"include\",\n    body: JSON.stringify({ email, password }),\n  })\n\n  const data: LoginResponse = await response.json()\n\n  if (!data.status) {\n    throw new Error(data.message || \"Login failed\")\n  }\n\n  return {\n    user: data.data.user,\n    token: data.data.token,\n  }\n}\n\nexport async function logout(token: string): Promise<void> {\n  const response = await fetch(`${API_BASE_URL}/logout`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${token}`,\n    },\n  })\n\n  const data: LogoutResponse = await response.json()\n\n  if (!data.status) {\n    throw new Error(data.message || \"Logout failed\")\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAqB;AAArB,MAAM;AA4BC,eAAe,MAAM,KAAa,EAAE,QAAgB;IACzD,QAAQ,GAAG,CAAC,gBAAgB;IAC5B,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,MAAM,CAAC,EAAE;QACpD,QAAQ;QACR,SAAS;YACP,gBAAgB;QAClB;QACA,aAAa;QACb,MAAM,KAAK,SAAS,CAAC;YAAE;YAAO;QAAS;IACzC;IAEA,MAAM,OAAsB,MAAM,SAAS,IAAI;IAE/C,IAAI,CAAC,KAAK,MAAM,EAAE;QAChB,MAAM,IAAI,MAAM,KAAK,OAAO,IAAI;IAClC;IAEA,OAAO;QACL,MAAM,KAAK,IAAI,CAAC,IAAI;QACpB,OAAO,KAAK,IAAI,CAAC,KAAK;IACxB;AACF;AAEO,eAAe,OAAO,KAAa;IACxC,MAAM,WAAW,MAAM,MAAM,GAAG,aAAa,OAAO,CAAC,EAAE;QACrD,QAAQ;QACR,SAAS;YACP,gBAAgB;YAChB,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,MAAM,OAAuB,MAAM,SAAS,IAAI;IAEhD,IAAI,CAAC,KAAK,MAAM,EAAE;QAChB,MAAM,IAAI,MAAM,KAAK,OAAO,IAAI;IAClC;AACF"}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///home/sunny/Documents/sanction/lib/store/slices/authSlice.ts"],"sourcesContent":["\"use client\"\n\nimport { createSlice, createAsyncThunk, type PayloadAction } from \"@reduxjs/toolkit\"\nimport { login as loginAPI, logout as logoutAPI } from \"@/lib/auth\"\n\ninterface User {\n  id: number\n  name: string\n  email: string\n  phone?: string\n  role: string\n  email_verified_at?: string\n  created_at?: string\n  updated_at?: string\n}\n\ninterface AuthState {\n  user: User | null\n  token: string | null\n  isAuthenticated: boolean\n  isLoading: boolean\n  error: string | null\n}\n\nconst initialState: AuthState = {\n  user: null,\n  token: null,\n  isAuthenticated: false,\n  isLoading: false,\n  error: null,\n}\n\nexport const loginUser = createAsyncThunk(\n  \"auth/loginUser\",\n  async ({ email, password }: { email: string; password: string }, { rejectWithValue }) => {\n    try {\n      const { user, token } = await loginAPI(email, password)\n      return { user, token }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : \"Login failed\"\n      return rejectWithValue(errorMessage)\n    }\n  },\n)\n\nexport const logoutUser = createAsyncThunk(\"auth/logoutUser\", async (token: string | null, { rejectWithValue }) => {\n  try {\n    if (token) {\n      await logoutAPI(token)\n    }\n    return null\n  } catch (error) {\n    const errorMessage = error instanceof Error ? error.message : \"Logout failed\"\n    return rejectWithValue(errorMessage)\n  }\n})\n\nconst authSlice = createSlice({\n  name: \"auth\",\n  initialState,\n  reducers: {\n    clearError: (state) => {\n      state.error = null\n    },\n    restoreAuthFromStorage: (state, action: PayloadAction<{ user: User; token: string }>) => {\n      state.user = action.payload.user\n      state.token = action.payload.token\n      state.isAuthenticated = true\n    },\n  },\n  extraReducers: (builder) => {\n    builder\n      .addCase(loginUser.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(loginUser.fulfilled, (state, action) => {\n        state.isLoading = false\n        state.user = action.payload.user\n        state.token = action.payload.token\n        state.isAuthenticated = true\n        state.error = null\n      })\n      .addCase(loginUser.rejected, (state, action) => {\n        state.isLoading = false\n        state.error = action.payload as string\n        state.isAuthenticated = false\n      })\n\n    builder\n      .addCase(logoutUser.pending, (state) => {\n        state.isLoading = true\n        state.error = null\n      })\n      .addCase(logoutUser.fulfilled, (state) => {\n        state.isLoading = false\n        state.user = null\n        state.token = null\n        state.isAuthenticated = false\n        state.error = null\n      })\n      .addCase(logoutUser.rejected, (state, action) => {\n        state.isLoading = false\n        state.error = action.payload as string\n      })\n  },\n})\n\nexport const { clearError, restoreAuthFromStorage } = authSlice.actions\nexport default authSlice.reducer\n"],"names":[],"mappings":";;;;;;;;;;;;AAEA;AACA;AAHA;;;AAwBA,MAAM,eAA0B;IAC9B,MAAM;IACN,OAAO;IACP,iBAAiB;IACjB,WAAW;IACX,OAAO;AACT;AAEO,MAAM,YAAY,IAAA,0ZAAgB,EACvC,kBACA,OAAO,EAAE,KAAK,EAAE,QAAQ,EAAuC,EAAE,EAAE,eAAe,EAAE;IAClF,IAAI;QACF,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,IAAA,uHAAQ,EAAC,OAAO;QAC9C,OAAO;YAAE;YAAM;QAAM;IACvB,EAAE,OAAO,OAAO;QACd,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAC9D,OAAO,gBAAgB;IACzB;AACF;AAGK,MAAM,aAAa,IAAA,0ZAAgB,EAAC,mBAAmB,OAAO,OAAsB,EAAE,eAAe,EAAE;IAC5G,IAAI;QACF,IAAI,OAAO;YACT,MAAM,IAAA,wHAAS,EAAC;QAClB;QACA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,MAAM,eAAe,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAC9D,OAAO,gBAAgB;IACzB;AACF;AAEA,MAAM,YAAY,IAAA,qZAAW,EAAC;IAC5B,MAAM;IACN;IACA,UAAU;QACR,YAAY,CAAC;YACX,MAAM,KAAK,GAAG;QAChB;QACA,wBAAwB,CAAC,OAAO;YAC9B,MAAM,IAAI,GAAG,OAAO,OAAO,CAAC,IAAI;YAChC,MAAM,KAAK,GAAG,OAAO,OAAO,CAAC,KAAK;YAClC,MAAM,eAAe,GAAG;QAC1B;IACF;IACA,eAAe,CAAC;QACd,QACG,OAAO,CAAC,UAAU,OAAO,EAAE,CAAC;YAC3B,MAAM,SAAS,GAAG;YAClB,MAAM,KAAK,GAAG;QAChB,GACC,OAAO,CAAC,UAAU,SAAS,EAAE,CAAC,OAAO;YACpC,MAAM,SAAS,GAAG;YAClB,MAAM,IAAI,GAAG,OAAO,OAAO,CAAC,IAAI;YAChC,MAAM,KAAK,GAAG,OAAO,OAAO,CAAC,KAAK;YAClC,MAAM,eAAe,GAAG;YACxB,MAAM,KAAK,GAAG;QAChB,GACC,OAAO,CAAC,UAAU,QAAQ,EAAE,CAAC,OAAO;YACnC,MAAM,SAAS,GAAG;YAClB,MAAM,KAAK,GAAG,OAAO,OAAO;YAC5B,MAAM,eAAe,GAAG;QAC1B;QAEF,QACG,OAAO,CAAC,WAAW,OAAO,EAAE,CAAC;YAC5B,MAAM,SAAS,GAAG;YAClB,MAAM,KAAK,GAAG;QAChB,GACC,OAAO,CAAC,WAAW,SAAS,EAAE,CAAC;YAC9B,MAAM,SAAS,GAAG;YAClB,MAAM,IAAI,GAAG;YACb,MAAM,KAAK,GAAG;YACd,MAAM,eAAe,GAAG;YACxB,MAAM,KAAK,GAAG;QAChB,GACC,OAAO,CAAC,WAAW,QAAQ,EAAE,CAAC,OAAO;YACpC,MAAM,SAAS,GAAG;YAClB,MAAM,KAAK,GAAG,OAAO,OAAO;QAC9B;IACJ;AACF;AAEO,MAAM,EAAE,UAAU,EAAE,sBAAsB,EAAE,GAAG,UAAU,OAAO;uCACxD,UAAU,OAAO"}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///home/sunny/Documents/sanction/lib/store/store.ts"],"sourcesContent":["\"use client\"\n\nimport { configureStore } from \"@reduxjs/toolkit\"\nimport authReducer from \"./slices/authSlice\"\n\nexport const store = configureStore({\n  reducer: {\n    auth: authReducer,\n  },\n})\n\nexport type RootState = ReturnType<typeof store.getState>\nexport type AppDispatch = typeof store.dispatch\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAKO,MAAM,QAAQ,IAAA,wZAAc,EAAC;IAClC,SAAS;QACP,MAAM,iJAAW;IACnB;AACF"}},
    {"offset": {"line": 174, "column": 0}, "map": {"version":3,"sources":["file:///home/sunny/Documents/sanction/lib/store/hooks.ts"],"sourcesContent":["\"use client\"\n\nimport { useDispatch, useSelector, type TypedUseSelectorHook } from \"react-redux\"\nimport type { RootState, AppDispatch } from \"./store\"\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector\n"],"names":[],"mappings":";;;;;;AAEA;;AAFA;;AAKO,MAAM,iBAAiB;;IAAM,OAAA,IAAA,oTAAW;AAAc;GAAhD;;QAAuB,oTAAW;;;AACxC,MAAM,iBAAkD,oTAAW"}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"sources":["file:///home/sunny/Documents/sanction/app/providers.tsx"],"sourcesContent":["\"use client\"\n\nimport type { ReactNode } from \"react\"\nimport { Provider } from \"react-redux\"\nimport { store } from \"@/lib/store/store\"\nimport { useEffect, useState } from \"react\"\nimport { useAppDispatch } from \"@/lib/store/hooks\"\nimport { restoreAuthFromStorage } from \"@/lib/store/slices/authSlice\"\n\nfunction ReduxInitializer({ children }: { children: ReactNode }) {\n  const dispatch = useAppDispatch()\n  const [mounted, setMounted] = useState(false)\n\n  useEffect(() => {\n    setMounted(true)\n\n    const storedAuth = localStorage.getItem(\"auth-state\")\n    if (storedAuth) {\n      try {\n        const parsed = JSON.parse(storedAuth)\n        if (parsed?.user && parsed?.token) {\n          dispatch(\n            restoreAuthFromStorage({\n              user: parsed.user,\n              token: parsed.token,\n            })\n          )\n        }\n      } catch (err) {\n        console.error(\"Failed to restore auth:\", err)\n      }\n    }\n  }, [dispatch])\n\n  // â›” Prevent render until client hydration is complete\n  if (!mounted) return null\n\n  return <>{children}</>\n}\n\nexport function Providers({ children }: { children: ReactNode }) {\n  return (\n    <Provider store={store}>\n      <ReduxInitializer>{children}</ReduxInitializer>\n    </Provider>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AACA;;;AAPA;;;;;;AASA,SAAS,iBAAiB,EAAE,QAAQ,EAA2B;;IAC7D,MAAM,WAAW,IAAA,0IAAc;IAC/B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,ySAAQ,EAAC;IAEvC,IAAA,0SAAS;sCAAC;YACR,WAAW;YAEX,MAAM,aAAa,aAAa,OAAO,CAAC;YACxC,IAAI,YAAY;gBACd,IAAI;oBACF,MAAM,SAAS,KAAK,KAAK,CAAC;oBAC1B,IAAI,QAAQ,QAAQ,QAAQ,OAAO;wBACjC,SACE,IAAA,gKAAsB,EAAC;4BACrB,MAAM,OAAO,IAAI;4BACjB,OAAO,OAAO,KAAK;wBACrB;oBAEJ;gBACF,EAAE,OAAO,KAAK;oBACZ,QAAQ,KAAK,CAAC,2BAA2B;gBAC3C;YACF;QACF;qCAAG;QAAC;KAAS;IAEb,sDAAsD;IACtD,IAAI,CAAC,SAAS,OAAO;IAErB,qBAAO;kBAAG;;AACZ;GA7BS;;QACU,0IAAc;;;KADxB;AA+BF,SAAS,UAAU,EAAE,QAAQ,EAA2B;IAC7D,qBACE,6TAAC,iTAAQ;QAAC,OAAO,iIAAK;kBACpB,cAAA,6TAAC;sBAAkB;;;;;;;;;;;AAGzB;MANgB"}}]
}
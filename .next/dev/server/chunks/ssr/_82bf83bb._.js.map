{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/sunny/Documents/sanction/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8WAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///home/sunny/Documents/sanction/app/dashboard/screening/quick/results/page.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\"\n\ntype Candidate = {\n  id: number\n  source: string\n  subject_type: string\n  name: string\n  confidence: number\n  nationality?: string | null\n  address?: string | null\n  dob?: string | null\n  gender?: string | null\n}\n\ntype BestBySourceItem = {\n  source: string\n  best_confidence: boolean\n  data: Array<Candidate | null>\n}\n\ntype ScreeningResponse = {\n  status: string\n  message: string\n  data?: {\n    searched_for?: string\n    total_candidates?: number\n    best_by_source?: BestBySourceItem[]\n  }\n}\n\ntype SourceDecision = \"relevant\" | \"irrelevant\" | \"no_sp\"\n\nfunction band(conf: number) {\n  if (conf >= 90) return { label: \"High\", cls: \"bg-green-100 text-green-800 border-green-200\" }\n  if (conf > 30) return { label: \"Fair\", cls: \"bg-orange-100 text-orange-800 border-orange-200\" }\n  return { label: \"Low\", cls: \"bg-red-100 text-red-800 border-red-200\" }\n}\n\nfunction confidenceNum(v: unknown) {\n  const n = Number(v)\n  return Number.isFinite(n) ? n : 0\n}\n\nfunction hasRelevantForSource(candidates: Candidate[]) {\n  return candidates.some((c) => confidenceNum(c?.confidence) >= 90)\n}\n\nfunction hasIrrelevantForSource(candidates: Candidate[]) {\n  return candidates.some((c) => {\n    const v = confidenceNum(c?.confidence)\n    return v > 30 && v < 90\n  })\n}\n\nfunction hasNoSpForSource(candidates: Candidate[]) {\n  return candidates.some((c) => confidenceNum(c?.confidence) < 30)\n}\n\nfunction defaultDecisionForSource(candidates: Candidate[]): SourceDecision {\n  if (hasRelevantForSource(candidates)) return \"relevant\"\n  if (hasIrrelevantForSource(candidates)) return \"irrelevant\"\n  return \"no_sp\"\n}\n\nconst ANNOTATION_OPTIONS = [\n  { value: \"false_positive\", label: \"False positive\" },\n  { value: \"name_match_only\", label: \"Name match only\" },\n  { value: \"insufficient_data\", label: \"Insufficient data\" },\n  { value: \"needs_review\", label: \"Needs review\" },\n  { value: \"other\", label: \"Other (type below)\" },\n] as const\n\nexport default function QuickScreeningResultsPage() {\n  const [payload, setPayload] = React.useState<ScreeningResponse | null>(null)\n\n  React.useEffect(() => {\n    const raw = sessionStorage.getItem(\"screening_results\")\n    if (!raw) return\n    try {\n      setPayload(JSON.parse(raw))\n    } catch {\n      setPayload(null)\n    }\n  }, [])\n\n  const searchedFor = payload?.data?.searched_for || \"-\"\n  const bestBySource = payload?.data?.best_by_source || []\n\n  // Source-level decision (per source)\n  const [sourceDecision, setSourceDecision] = React.useState<Record<string, SourceDecision>>({})\n\n  // Source-level annotation (per source)\n  const [sourceAnnotationChoice, setSourceAnnotationChoice] = React.useState<Record<string, string>>({})\n  const [sourceAnnotationText, setSourceAnnotationText] = React.useState<Record<string, string>>({})\n\n  React.useEffect(() => {\n    const nextDecision: Record<string, SourceDecision> = {}\n    const nextAnnoChoice: Record<string, string> = {}\n    const nextAnnoText: Record<string, string> = {}\n\n    for (const src of bestBySource) {\n      const candidates = (src.data || []).filter(Boolean) as Candidate[]\n      nextDecision[src.source] = defaultDecisionForSource(candidates)\n\n      // defaults for annotation per source\n      nextAnnoChoice[src.source] = \"needs_review\"\n      nextAnnoText[src.source] = \"\"\n    }\n\n    setSourceDecision(nextDecision)\n    setSourceAnnotationChoice(nextAnnoChoice)\n    setSourceAnnotationText(nextAnnoText)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [payload])\n\n  if (!payload) {\n    return (\n      <div className=\"max-w-6xl mx-auto p-6\">\n        <Card>\n          <CardContent className=\"pt-6 space-y-3\">\n            <div className=\"text-sm text-muted-foreground\">No results found in session. Run a search first.</div>\n            <Button onClick={() => (window.location.href = \"/dashboard/screening/quick\")}>Back to Quick Screening</Button>\n          </CardContent>\n        </Card>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"max-w-6xl mx-auto space-y-6 p-6\">\n      <div className=\"flex items-end justify-between gap-4\">\n        <div>\n          <div className=\"text-sm text-muted-foreground\">Searched for</div>\n          <div className=\"text-2xl font-semibold\">{searchedFor}</div>\n        </div>\n        <Button variant=\"outline\" onClick={() => (window.location.href = \"/dashboard/screening/quick\")}>\n          New Search\n        </Button>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4\">\n        {bestBySource.map((src) => {\n          const candidates = (src.data || []).filter(Boolean) as Candidate[]\n\n          const showRelevant = hasRelevantForSource(candidates)\n          const showIrrelevant = hasIrrelevantForSource(candidates)\n          const showNoSp = hasNoSpForSource(candidates)\n\n          const dec = sourceDecision[src.source] ?? defaultDecisionForSource(candidates)\n\n          const anno = sourceAnnotationChoice[src.source] ?? \"needs_review\"\n          const showAnnoText = anno === \"other\"\n\n          return (\n            <Card key={src.source} className=\"h-full\">\n              <CardHeader className=\"border-b space-y-3\">\n                {/* TOP: source name + count */}\n                <div className=\"flex items-center justify-between\">\n                  <CardTitle className=\"text-base\">{src.source}</CardTitle>\n                  <div className=\"text-sm text-muted-foreground\">{candidates.length ? `${candidates.length}` : \"0\"}</div>\n                </div>\n                {candidates.length ? (\n                  candidates.map((c) => {\n                    const conf = confidenceNum(c.confidence)\n                    const b = band(conf)\n\n                    return (\n                      <div key={`${src.source}:${c.id}`} className=\"border rounded-lg p-3\">\n                        <div className=\"flex items-start justify-between gap-3\">\n                          <div className=\"min-w-0\">\n                            <div className=\"font-semibold truncate\">{c.name || \"-\"}</div>\n                            <div className=\"text-xs text-muted-foreground truncate\">{c.subject_type || \"-\"}</div>\n                          </div>\n\n                          <div className=\"flex flex-col items-end gap-2 shrink-0\">\n                            <div className={`px-3 py-1 rounded-md border text-sm font-medium ${b.cls}`}>{b.label}</div>\n                            <div className=\"text-sm text-muted-foreground tabular-nums\">{conf.toFixed(2)}%</div>\n                          </div>\n                        </div>\n                      </div>\n                    )\n                  })\n                ) : (\n                  <div className=\"text-sm text-muted-foreground\">No S.P. for this source.</div>\n                )}\n\n                \n\n                \n              </CardHeader>\n\n              <CardContent className=\"pt-6 space-y-3\">\n                \n                {/* BOTTOM: decision (per source) */}\n                <div className=\"flex flex-col gap-2\">\n                  <div className=\"text-xs text-muted-foreground\">Decision (for this source)</div>\n\n                  <div className=\"flex flex-wrap items-center gap-4\">\n                    {showRelevant ? (\n                      <label className=\"flex items-center gap-2 text-sm\">\n                        <input\n                          type=\"radio\"\n                          name={`src-decision-${src.source}`}\n                          checked={dec === \"relevant\"}\n                          onChange={() => setSourceDecision((p) => ({ ...p, [src.source]: \"relevant\" }))}\n                        />\n                        Relevent\n                      </label>\n                    ) : null}\n\n                    {showIrrelevant ? (\n                      <label className=\"flex items-center gap-2 text-sm\">\n                        <input\n                          type=\"radio\"\n                          name={`src-decision-${src.source}`}\n                          checked={dec === \"irrelevant\"}\n                          onChange={() => setSourceDecision((p) => ({ ...p, [src.source]: \"irrelevant\" }))}\n                        />\n                        Irrelevent\n                      </label>\n                    ) : null}\n\n                    {showNoSp ? (\n                      <label className=\"flex items-center gap-2 text-sm\">\n                        <input\n                          type=\"radio\"\n                          name={`src-decision-${src.source}`}\n                          checked={dec === \"no_sp\"}\n                          onChange={() => setSourceDecision((p) => ({ ...p, [src.source]: \"no_sp\" }))}\n                        />\n                        Not any S.P.\n                      </label>\n                    ) : null}\n\n                    {!showRelevant && !showIrrelevant && !showNoSp ? (\n                      <div className=\"text-xs text-muted-foreground\">No decision options for this source.</div>\n                    ) : null}\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          )\n        })}\n      </div>\n    </div>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAuCA,SAAS,KAAK,IAAY;IACxB,IAAI,QAAQ,IAAI,OAAO;QAAE,OAAO;QAAQ,KAAK;IAA+C;IAC5F,IAAI,OAAO,IAAI,OAAO;QAAE,OAAO;QAAQ,KAAK;IAAkD;IAC9F,OAAO;QAAE,OAAO;QAAO,KAAK;IAAyC;AACvE;AAEA,SAAS,cAAc,CAAU;IAC/B,MAAM,IAAI,OAAO;IACjB,OAAO,OAAO,QAAQ,CAAC,KAAK,IAAI;AAClC;AAEA,SAAS,qBAAqB,UAAuB;IACnD,OAAO,WAAW,IAAI,CAAC,CAAC,IAAM,cAAc,GAAG,eAAe;AAChE;AAEA,SAAS,uBAAuB,UAAuB;IACrD,OAAO,WAAW,IAAI,CAAC,CAAC;QACtB,MAAM,IAAI,cAAc,GAAG;QAC3B,OAAO,IAAI,MAAM,IAAI;IACvB;AACF;AAEA,SAAS,iBAAiB,UAAuB;IAC/C,OAAO,WAAW,IAAI,CAAC,CAAC,IAAM,cAAc,GAAG,cAAc;AAC/D;AAEA,SAAS,yBAAyB,UAAuB;IACvD,IAAI,qBAAqB,aAAa,OAAO;IAC7C,IAAI,uBAAuB,aAAa,OAAO;IAC/C,OAAO;AACT;AAEA,MAAM,qBAAqB;IACzB;QAAE,OAAO;QAAkB,OAAO;IAAiB;IACnD;QAAE,OAAO;QAAmB,OAAO;IAAkB;IACrD;QAAE,OAAO;QAAqB,OAAO;IAAoB;IACzD;QAAE,OAAO;QAAgB,OAAO;IAAe;IAC/C;QAAE,OAAO;QAAS,OAAO;IAAqB;CAC/C;AAEc,SAAS;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,iVAAc,CAA2B;IAEvE,kVAAe,CAAC;QACd,MAAM,MAAM,eAAe,OAAO,CAAC;QACnC,IAAI,CAAC,KAAK;QACV,IAAI;YACF,WAAW,KAAK,KAAK,CAAC;QACxB,EAAE,OAAM;YACN,WAAW;QACb;IACF,GAAG,EAAE;IAEL,MAAM,cAAc,SAAS,MAAM,gBAAgB;IACnD,MAAM,eAAe,SAAS,MAAM,kBAAkB,EAAE;IAExD,qCAAqC;IACrC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,iVAAc,CAAiC,CAAC;IAE5F,uCAAuC;IACvC,MAAM,CAAC,wBAAwB,0BAA0B,GAAG,iVAAc,CAAyB,CAAC;IACpG,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,iVAAc,CAAyB,CAAC;IAEhG,kVAAe,CAAC;QACd,MAAM,eAA+C,CAAC;QACtD,MAAM,iBAAyC,CAAC;QAChD,MAAM,eAAuC,CAAC;QAE9C,KAAK,MAAM,OAAO,aAAc;YAC9B,MAAM,aAAa,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,MAAM,CAAC;YAC3C,YAAY,CAAC,IAAI,MAAM,CAAC,GAAG,yBAAyB;YAEpD,qCAAqC;YACrC,cAAc,CAAC,IAAI,MAAM,CAAC,GAAG;YAC7B,YAAY,CAAC,IAAI,MAAM,CAAC,GAAG;QAC7B;QAEA,kBAAkB;QAClB,0BAA0B;QAC1B,wBAAwB;IACxB,uDAAuD;IACzD,GAAG;QAAC;KAAQ;IAEZ,IAAI,CAAC,SAAS;QACZ,qBACE,8WAAC;YAAI,WAAU;sBACb,cAAA,8WAAC,iIAAI;0BACH,cAAA,8WAAC,wIAAW;oBAAC,WAAU;;sCACrB,8WAAC;4BAAI,WAAU;sCAAgC;;;;;;sCAC/C,8WAAC,qIAAM;4BAAC,SAAS,IAAO,OAAO,QAAQ,CAAC,IAAI,GAAG;sCAA+B;;;;;;;;;;;;;;;;;;;;;;IAKxF;IAEA,qBACE,8WAAC;QAAI,WAAU;;0BACb,8WAAC;gBAAI,WAAU;;kCACb,8WAAC;;0CACC,8WAAC;gCAAI,WAAU;0CAAgC;;;;;;0CAC/C,8WAAC;gCAAI,WAAU;0CAA0B;;;;;;;;;;;;kCAE3C,8WAAC,qIAAM;wBAAC,SAAQ;wBAAU,SAAS,IAAO,OAAO,QAAQ,CAAC,IAAI,GAAG;kCAA+B;;;;;;;;;;;;0BAKlG,8WAAC;gBAAI,WAAU;0BACZ,aAAa,GAAG,CAAC,CAAC;oBACjB,MAAM,aAAa,CAAC,IAAI,IAAI,IAAI,EAAE,EAAE,MAAM,CAAC;oBAE3C,MAAM,eAAe,qBAAqB;oBAC1C,MAAM,iBAAiB,uBAAuB;oBAC9C,MAAM,WAAW,iBAAiB;oBAElC,MAAM,MAAM,cAAc,CAAC,IAAI,MAAM,CAAC,IAAI,yBAAyB;oBAEnE,MAAM,OAAO,sBAAsB,CAAC,IAAI,MAAM,CAAC,IAAI;oBACnD,MAAM,eAAe,SAAS;oBAE9B,qBACE,8WAAC,iIAAI;wBAAkB,WAAU;;0CAC/B,8WAAC,uIAAU;gCAAC,WAAU;;kDAEpB,8WAAC;wCAAI,WAAU;;0DACb,8WAAC,sIAAS;gDAAC,WAAU;0DAAa,IAAI,MAAM;;;;;;0DAC5C,8WAAC;gDAAI,WAAU;0DAAiC,WAAW,MAAM,GAAG,GAAG,WAAW,MAAM,EAAE,GAAG;;;;;;;;;;;;oCAE9F,WAAW,MAAM,GAChB,WAAW,GAAG,CAAC,CAAC;wCACd,MAAM,OAAO,cAAc,EAAE,UAAU;wCACvC,MAAM,IAAI,KAAK;wCAEf,qBACE,8WAAC;4CAAkC,WAAU;sDAC3C,cAAA,8WAAC;gDAAI,WAAU;;kEACb,8WAAC;wDAAI,WAAU;;0EACb,8WAAC;gEAAI,WAAU;0EAA0B,EAAE,IAAI,IAAI;;;;;;0EACnD,8WAAC;gEAAI,WAAU;0EAA0C,EAAE,YAAY,IAAI;;;;;;;;;;;;kEAG7E,8WAAC;wDAAI,WAAU;;0EACb,8WAAC;gEAAI,WAAW,CAAC,gDAAgD,EAAE,EAAE,GAAG,EAAE;0EAAG,EAAE,KAAK;;;;;;0EACpF,8WAAC;gEAAI,WAAU;;oEAA8C,KAAK,OAAO,CAAC;oEAAG;;;;;;;;;;;;;;;;;;;2CATzE,GAAG,IAAI,MAAM,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE;;;;;oCAcrC,mBAEA,8WAAC;wCAAI,WAAU;kDAAgC;;;;;;;;;;;;0CAQnD,8WAAC,wIAAW;gCAAC,WAAU;0CAGrB,cAAA,8WAAC;oCAAI,WAAU;;sDACb,8WAAC;4CAAI,WAAU;sDAAgC;;;;;;sDAE/C,8WAAC;4CAAI,WAAU;;gDACZ,6BACC,8WAAC;oDAAM,WAAU;;sEACf,8WAAC;4DACC,MAAK;4DACL,MAAM,CAAC,aAAa,EAAE,IAAI,MAAM,EAAE;4DAClC,SAAS,QAAQ;4DACjB,UAAU,IAAM,kBAAkB,CAAC,IAAM,CAAC;wEAAE,GAAG,CAAC;wEAAE,CAAC,IAAI,MAAM,CAAC,EAAE;oEAAW,CAAC;;;;;;wDAC5E;;;;;;2DAGF;gDAEH,+BACC,8WAAC;oDAAM,WAAU;;sEACf,8WAAC;4DACC,MAAK;4DACL,MAAM,CAAC,aAAa,EAAE,IAAI,MAAM,EAAE;4DAClC,SAAS,QAAQ;4DACjB,UAAU,IAAM,kBAAkB,CAAC,IAAM,CAAC;wEAAE,GAAG,CAAC;wEAAE,CAAC,IAAI,MAAM,CAAC,EAAE;oEAAa,CAAC;;;;;;wDAC9E;;;;;;2DAGF;gDAEH,yBACC,8WAAC;oDAAM,WAAU;;sEACf,8WAAC;4DACC,MAAK;4DACL,MAAM,CAAC,aAAa,EAAE,IAAI,MAAM,EAAE;4DAClC,SAAS,QAAQ;4DACjB,UAAU,IAAM,kBAAkB,CAAC,IAAM,CAAC;wEAAE,GAAG,CAAC;wEAAE,CAAC,IAAI,MAAM,CAAC,EAAE;oEAAQ,CAAC;;;;;;wDACzE;;;;;;2DAGF;gDAEH,CAAC,gBAAgB,CAAC,kBAAkB,CAAC,yBACpC,8WAAC;oDAAI,WAAU;8DAAgC;;;;;2DAC7C;;;;;;;;;;;;;;;;;;;uBAlFD,IAAI,MAAM;;;;;gBAwFzB;;;;;;;;;;;;AAIR"}}]
}
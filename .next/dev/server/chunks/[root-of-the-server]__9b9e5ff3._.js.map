{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/sunny/Documents/sanction/app/api/auth/login/route.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\n\nexport async function POST(request: Request) {\n  const body = await request.json();\n\n  // 1. Forward login request to Laravel\n  const res = await fetch(`${process.env.NEXT_PUBLIC_API_BASE_URL}/api/login`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },\n    body: JSON.stringify(body),\n  });\n\n  const data = await res.json();\n\n  if (!res.ok) {\n    return NextResponse.json(data, { status: res.status });\n  }\n\n  // 2. Prepare the response body with user data\n  // Assuming your Laravel response looks like: { data: { access_token: '...', user: {...} } }\n  const response = NextResponse.json({ \n    message: 'Login successful',\n    user: data.data.user // This sends user info back to the frontend\n  });\n\n  // 3. Set the token in a secure httpOnly cookie\n  response.cookies.set('session_token', data.data.access_token, {\n    httpOnly: true,\n    secure: process.env.NODE_ENV === 'production',\n    sameSite: 'lax',\n    path: '/',\n  });\n\n  return response;\n}"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,OAAgB;IACzC,MAAM,OAAO,MAAM,QAAQ,IAAI;IAE/B,sCAAsC;IACtC,MAAM,MAAM,MAAM,MAAM,6DAAwC,UAAU,CAAC,EAAE;QAC3E,QAAQ;QACR,SAAS;YAAE,gBAAgB;YAAoB,UAAU;QAAmB;QAC5E,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,MAAM,OAAO,MAAM,IAAI,IAAI;IAE3B,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,OAAO,gRAAY,CAAC,IAAI,CAAC,MAAM;YAAE,QAAQ,IAAI,MAAM;QAAC;IACtD;IAEA,8CAA8C;IAC9C,4FAA4F;IAC5F,MAAM,WAAW,gRAAY,CAAC,IAAI,CAAC;QACjC,SAAS;QACT,MAAM,KAAK,IAAI,CAAC,IAAI,CAAC,4CAA4C;IACnE;IAEA,+CAA+C;IAC/C,SAAS,OAAO,CAAC,GAAG,CAAC,iBAAiB,KAAK,IAAI,CAAC,YAAY,EAAE;QAC5D,UAAU;QACV,QAAQ,oDAAyB;QACjC,UAAU;QACV,MAAM;IACR;IAEA,OAAO;AACT"}}]
}
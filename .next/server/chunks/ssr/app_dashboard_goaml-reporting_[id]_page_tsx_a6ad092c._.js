module.exports=[8176,a=>{"use strict";var b=a.i(64781),c=a.i(89982),d=a.i(30505),e=a.i(8490);function f(a,b,c="  "){return`${c}<${a}>${(null==b?"":String(b)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}</${a}>`}var g=a.i(68515);function h(){let a=(0,e.useParams)(),h=a?.id,[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),{user:q}=(0,g.useAuthStore)();(0,c.useEffect)(()=>{if(!h){n("Missing report id"),l(!1);return}!async function(){try{l(!0);let a=await fetch(`/api/goaml/reports/${h}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),b=await a.json();console.log("Fetched GOAML Report:",b),b?.status?j(b.data.report):n(b?.message||"Failed to load report")}catch(a){n(a.message||"Failed to load report")}finally{l(!1)}}()},[h]);let r=(0,c.useMemo)(()=>{let a=i?.id??h??"report";return`goaml-report-${a}.xml`},[i?.id,h]);return k?(0,b.jsx)("div",{className:"p-6",children:"Loading..."}):m?(0,b.jsx)("div",{className:"p-6 text-red-600",children:m}):i?(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:"View GOAML Report"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{className:"px-3 py-2 rounded border text-sm disabled:opacity-60",onClick:()=>{if(i){p(!0);try{let a,b,c,d,e,g,h,j,k=(a=i?.customer||{},b=a?.individual_detail||{},c=a?.corporate_detail||{},d=i?.created_at?new Date(i.created_at).toISOString():"",(e=[]).push('<?xml version="1.0" encoding="UTF-8"?>'),e.push("<goaml_report>"),e.push(f("report_id",i?.id??"","  ")),e.push(f("created_at",d,"  ")),e.push("  <customer>"),e.push(f("customer_type",a?.customer_type??"","    ")),e.push(f("customer_name",i?.customer_name??a?.name??"","    ")),e.push(f("customer_id",i?.customer_id??a?.id??"","    ")),e.push(f("contact_office_number",a?.contact_office_number??"","    ")),e.push(f("company_address",c?.company_address??a?.company_address??"","    ")),e.push("    <individual_detail>"),e.push(f("first_name",b?.first_name??"","      ")),e.push(f("last_name",b?.last_name??"","      ")),e.push(f("passport_country",b?.passport_country??"","      ")),e.push(f("nationality",b?.nationality??"","      ")),e.push(f("phone_number",b?.phone_number??"","      ")),e.push(f("address",b?.address??"","      ")),e.push(f("country_code",b?.country_code??"","      ")),e.push("    </individual_detail>"),e.push("  </customer>"),e.push("  <report_details>"),e.push(f("entity_reference",i?.entity_reference??"","    ")),e.push(f("transaction_type",i?.transaction_type??"","    ")),e.push(f("comments",i?.comments??"","    ")),e.push(f("item_type",i?.item_type??"","    ")),e.push(f("item_make",i?.item_make??"","    ")),e.push(f("description",i?.description??"","    ")),e.push(f("disposed_value",i?.disposed_value??"","    ")),e.push(f("status_comments",i?.status_comments??"","    ")),e.push(f("estimated_value",i?.estimated_value??"","    ")),e.push(f("currency_code",i?.currency_code??"","    ")),e.push("  </report_details>"),e.push("</goaml_report>"),e.join("\n"));g=new Blob([k],{type:"application/xml"}),h=URL.createObjectURL(g),(j=document.createElement("a")).href=h,j.download=r,document.body.appendChild(j),j.click(),j.remove(),URL.revokeObjectURL(h)}finally{p(!1)}}},disabled:o,children:o?"Generating...":"Generate XML"}),q?.role!=="Analyst"&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.default,{href:`/dashboard/goaml-reporting/edit/${h}`,children:(0,b.jsx)("button",{className:"px-3 py-2 rounded border text-sm",children:"Edit"})}),(0,b.jsx)("button",{className:"px-3 py-2 rounded border text-sm text-red-600",children:"Delete"})]})]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Report ID: ",i.id]}),(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["Created: ",i.created_at?new Date(i.created_at).toLocaleDateString():"-"]})]}),(0,b.jsxs)("div",{className:"mb-4 border p-3 rounded",children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Customer Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Customer Type"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.customer?.customer_type||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Customer Name"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.customer_name||i.customer?.name||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Customer ID"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.customer_id||i.customer?.id||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Contact Office Number"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.customer?.contact_office_number||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Company Address"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.customer?.corporate_detail?.company_address||i.customer?.company_address||"-"})]})]})]}),(0,b.jsxs)("div",{className:"mb-4 border p-3 rounded",children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Personal Information (Tenant Details)"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"First Name"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.customer?.individual_detail?.first_name||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Last Name"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.customer?.individual_detail?.last_name||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Passport Country"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.customer?.individual_detail?.passport_country||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Nationality"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.customer?.individual_detail?.nationality||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Phone Number"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.customer?.individual_detail?.phone_number||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Address"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.customer?.individual_detail?.address||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Country Code"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.customer?.individual_detail?.country_code||"-"})]})]})]}),(0,b.jsxs)("div",{className:"mb-4 border p-3 rounded",children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Report Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Entity Reference"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.entity_reference||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Transaction Type"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.transaction_type||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Comments"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.comments||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Item Type"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.item_type||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Item Make"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.item_make||"-"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Description"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.description||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Disposed Value"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.disposed_value||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Status Comments"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.status_comments||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Estimated Value"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.estimated_value||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm text-gray-600",children:"Currency Code"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:i.currency_code||"-"})]})]})]}),(0,b.jsx)("div",{className:"mt-6",children:(0,b.jsx)(d.default,{href:"/dashboard/goaml-reporting",className:"px-3 py-2 rounded border text-sm",children:"Back to list"})})]}):(0,b.jsx)("div",{className:"p-6",children:"No report found."})}a.s(["default",()=>h],8176)}];

//# sourceMappingURL=app_dashboard_goaml-reporting_%5Bid%5D_page_tsx_a6ad092c._.js.map
module.exports=[42406,a=>{"use strict";var b=a.i(64781),c=a.i(89982),d=a.i(8490),e=a.i(70246);function f(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)("all"),[n,o]=(0,c.useState)({entity_reference:"",transaction_type:"",comments:"",item_type:"",item_make:"",description:"",disposed_value:"",status_comments:"",estimated_value:"",currency_code:""}),{toast:p}=(0,e.useToast)();(0,c.useEffect)(()=>{!async function(){try{let a=await fetch("/api/goaml/meta",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),b=await a.json();b?.status&&i(b.data?.countries?.countries||[])}catch(a){console.error("Failed to fetch metadata",a)}}()},[]),(0,c.useEffect)(()=>{!async function(){try{let a=await fetch(`/api/onboarding/short-data-customers?customer_type=${l}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}}),b=await a.json();b?.status&&g(b.data||[])}catch(a){console.error("Failed to fetch customers",a)}}()},[l]);let q=async()=>{if(!j)return void p({title:"Required fields missing",description:"Please select a customer"});if(!j.id)return void p({title:"Error",description:"Customer ID is missing. Please re-select the customer."});try{let b={customer_id:Number(j.id),...n};console.log("Submitting payload:",b);let c=await fetch("/api/goaml/reports",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),d=await c.json();if(d?.status)a.refresh(),a.push("/dashboard/goaml-reporting");else{let a=JSON.parse(d.error);console.log("GOAML Report Creation Response:",a.message),p({title:a.message,description:a.error||"Failed to create report"})}}catch(a){console.error("Failed to submit report",a),p({title:"Error",description:"An error occurred while submitting the report"})}};return(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Create GOAML Report"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block mb-1",children:"Customer Type"}),(0,b.jsxs)("select",{className:"border p-2 rounded w-full",value:l,onChange:a=>m(a.target.value),children:[(0,b.jsx)("option",{value:"all",children:"All Customers"}),(0,b.jsx)("option",{value:"individual",children:"Individual"}),(0,b.jsx)("option",{value:"corporate",children:"Corporate"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block mb-1",children:"Pick Customer"}),(0,b.jsxs)("select",{className:"border p-2 rounded w-full",onChange:async a=>{let b=a.target.value;if(!b)return void k(null);try{let a=await fetch(`/api/onboarding/customers/${b}`),c=await a.json();if(c?.status){let a=c.data;a.id||(a.id=parseInt(b)),k(a)}}catch(a){console.error("Failed to fetch customer details",a)}},children:[(0,b.jsx)("option",{value:"",children:"Select Customer"}),f.map(a=>(0,b.jsx)("option",{value:a.id,children:a.name},a.id))]})]})]}),j&&(0,b.jsxs)("div",{className:"mb-4 border p-3 rounded",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Company Name"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:j.corporate_detail?.company_name||j.name||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Trade License Number"}),(0,b.jsxs)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:[j.corporate_detail?.office_country_code,j.corporate_detail?.office_no]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Contact Office Number"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:j.contact_office_number||"-"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Company Address"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:j.corporate_detail?.company_address||j.company_address||"-"})]})]}),j.individual_detail&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Personal Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"First Name"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:j.individual_detail.first_name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Last Name"}),(0,b.jsx)("div",{className:"mt-1 p-2 bg-gray-50 rounded border",children:j.individual_detail.last_name})]})]})]})]}),(0,b.jsxs)("div",{className:"mb-4 border p-3 rounded",children:[(0,b.jsx)("h3",{className:"font-semibold mb-4",children:"GOAML Report Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Entity Reference"}),(0,b.jsx)("input",{className:"border p-2 rounded w-full",value:n.entity_reference,onChange:a=>o({...n,entity_reference:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transaction Type"}),(0,b.jsxs)("select",{className:"border p-2 rounded w-full",value:n.transaction_type,onChange:a=>o({...n,transaction_type:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Select a transaction type"}),(0,b.jsx)("option",{value:"sale",children:"Sale"}),(0,b.jsx)("option",{value:"purchase",children:"Purchase"})]})]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comments"}),(0,b.jsx)("input",{className:"border p-2 rounded w-full",value:n.comments,onChange:a=>o({...n,comments:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Make"}),(0,b.jsx)("input",{className:"border p-2 rounded w-full",value:n.item_make,onChange:a=>o({...n,item_make:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Item Type"}),(0,b.jsxs)("select",{className:"border p-2 rounded w-full",value:n.item_type,onChange:a=>o({...n,item_type:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Select an item type"}),(0,b.jsx)("option",{value:"new",children:"New"}),(0,b.jsx)("option",{value:"old",children:"Old"})]})]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{className:"border p-2 rounded w-full",rows:3,value:n.description,onChange:a=>o({...n,description:a.target.value})})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disposed Value"}),(0,b.jsx)("input",{type:"number",className:"border p-2 rounded w-full",value:n.disposed_value,onChange:a=>o({...n,disposed_value:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status Comments"}),(0,b.jsx)("input",{className:"border p-2 rounded w-full",value:n.status_comments,onChange:a=>o({...n,status_comments:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Estimated Value"}),(0,b.jsx)("input",{type:"number",className:"border p-2 rounded w-full",value:n.estimated_value,onChange:a=>o({...n,estimated_value:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency Code"}),(0,b.jsxs)("select",{className:"border p-2 rounded w-full",value:n.currency_code,onChange:a=>o({...n,currency_code:a.target.value}),children:[(0,b.jsx)("option",{value:"",children:"Select currency code..."}),h.map(a=>(0,b.jsx)("option",{value:a.currency,children:a.currency},a.id))]})]})]})]}),(0,b.jsx)("button",{className:"px-3 py-2 rounded bg-blue-600 text-white text-sm",onClick:q,children:"Submit"})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_dashboard_goaml-reporting_create_page_tsx_5dc80a18._.js.map
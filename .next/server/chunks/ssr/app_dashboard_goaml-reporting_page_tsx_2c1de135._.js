module.exports=[6781,a=>{"use strict";var b=a.i(64781),c=a.i(30505),d=a.i(89982),e=a.i(68515);function f(){let[a,f]=(0,d.useState)([]),[g,h]=(0,d.useState)(1),[i,j]=(0,d.useState)(0),[k,l]=(0,d.useState)(""),[m,n]=(0,d.useState)(""),[o,p]=(0,d.useState)(0),{user:q}=(0,e.useAuthStore)();q?.role.toLowerCase().trim(),(0,d.useEffect)(()=>{let a=setTimeout(()=>n(k),500);return()=>clearTimeout(a)},[k]);let r=(0,d.useCallback)(async()=>{let a=new URLSearchParams;a.set("limit","10"),a.set("offset",String(g)),m.trim()&&a.set("search",m.trim());let b=await fetch(`/api/goaml/reports?${a.toString()}`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"},cache:"no-store"}),c=await b.json();console.log("Fetched GOAML Reports:",c),c?.status?(f(c.data?.reports||[]),j(c.data?.total||0)):(f([]),j(0))},[g,m]);return(0,d.useEffect)(()=>{h(1)},[m]),(0,d.useEffect)(()=>{r()},[r,o]),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,b.jsx)("h2",{className:"text-xl font-bold",children:"GOAML Reporting"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{className:"px-3 py-2 rounded border text-sm",onClick:()=>p(a=>a+1),children:"Refresh"}),(0,b.jsx)(c.default,{href:"/dashboard/goaml-reporting/create",className:"px-3 py-2 rounded bg-blue-600 text-white text-sm",children:"+ Create New Report"})]})]}),(0,b.jsxs)("div",{className:"rounded border bg-white",children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsx)("input",{type:"text",placeholder:"Search by customer name, ID, type, entity reference, or amount...",className:"p-2 border rounded w-full",value:k,onChange:a=>l(a.target.value)})}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"min-w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"bg-gray-50 text-left",children:[(0,b.jsx)("th",{className:"p-3 border-b",children:"Sl No."}),(0,b.jsx)("th",{className:"p-3 border-b",children:"Entity Reference No"}),(0,b.jsx)("th",{className:"p-3 border-b",children:"Customer Name"}),(0,b.jsx)("th",{className:"p-3 border-b",children:"Customer ID"}),(0,b.jsx)("th",{className:"p-3 border-b",children:"Customer Type"}),(0,b.jsx)("th",{className:"p-3 border-b",children:"Amount"}),(0,b.jsx)("th",{className:"p-3 border-b",children:"Created Date"}),(0,b.jsx)("th",{className:"p-3 border-b",children:"Actions"})]})}),(0,b.jsxs)("tbody",{children:[a.map((a,d)=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"p-3 border-b",children:(g-1)*10+d+1}),(0,b.jsx)("td",{className:"p-3 border-b",children:a.entity_reference||a.entityRefNo||"-"}),(0,b.jsx)("td",{className:"p-3 border-b",children:a.customer_name||a.customerName||"-"}),(0,b.jsx)("td",{className:"p-3 border-b",children:a.customer_id||a.customerId||"-"}),(0,b.jsx)("td",{className:"p-3 border-b",children:(0,b.jsx)("span",{className:"bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs",children:a.customer.customer_type||a.customer.customer_type||"-"})}),(0,b.jsx)("td",{className:"p-3 border-b",children:a.estimated_value??"-"}),(0,b.jsx)("td",{className:"p-3 border-b",children:a.created_at?new Date(a.created_at).toLocaleDateString():a.createdDate||"-"}),(0,b.jsx)("td",{className:"p-3 border-b",children:(0,b.jsxs)("div",{className:"flex gap-2",children:[q?.role!=="Analyst"&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(c.default,{href:`/dashboard/goaml-reporting/edit/${a.id}`,children:(0,b.jsx)("button",{className:"px-2 py-1 rounded border text-xs",children:"âœï¸"})}),(0,b.jsx)("button",{className:"px-2 py-1 rounded border text-xs",children:"ðŸ—‘ï¸"})]}),(0,b.jsx)(c.default,{href:`/dashboard/goaml-reporting/${a.id}`,className:"px-2 py-1 rounded border text-xs",children:"View"})]})})]},a.id||d)),0===a.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{className:"p-4 text-center text-sm text-gray-500",colSpan:8,children:"No reports found"})})]})]})}),(0,b.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,b.jsxs)("span",{className:"text-sm text-gray-600",children:["Showing ",(g-1)*10+1," to ",Math.min(10*g,i)," of ",i," entries"]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("button",{className:"px-2 py-1 rounded border text-sm",disabled:1===g,onClick:()=>h(g-1),children:"<"}),(0,b.jsx)("span",{className:"px-2 py-1 rounded bg-blue-600 text-white text-sm",children:g}),(0,b.jsx)("button",{className:"px-2 py-1 rounded border text-sm",disabled:a.length<10,onClick:()=>h(g+1),children:">"})]})]})]})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_dashboard_goaml-reporting_page_tsx_2c1de135._.js.map